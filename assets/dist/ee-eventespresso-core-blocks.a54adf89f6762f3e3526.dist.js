(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(e,t){e.exports=eejs.model},1:function(e,t){e.exports=lodash},11:function(e,t){e.exports=wp.data},13:function(e,t){e.exports=React},14:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},16:function(e,t){e.exports=wp.components},162:function(e,t,r){e.exports=r(166)},166:function(e,t,r){"use strict";r.r(t);var n=r(95),s=r(3),a=r(96),o=(r(68),{title:Object(s.__)("Event Attendees","event_espresso"),description:Object(s.__)("Displays a list of people that have registered for the specified event","event_espresso"),icon:"groups",category:"event-espresso",keywords:[Object(s.__)("event","event_espresso"),Object(s.__)("attendees","event_espresso"),Object(s.__)("list","event_espresso")],attributes:{eventId:{type:"number",default:0},datetimeId:{type:"number",default:0},ticketId:{type:"number",default:0},status:{type:"string",default:"RAP"},limit:{type:"number",default:100},order:{type:"string",default:"ASC"},orderBy:{type:"string",default:"lastThenFirstName"},showGravatar:{type:"boolean",default:!1},avatarClass:{type:"string",default:"contact"},avatarSize:{type:"number",default:24},displayOnArchives:{type:"boolean",default:!1}},edit:a.a,save:function(){return null}});Object(n.registerBlockType)("eventespresso/event-attendees",o)},26:function(e,t){e.exports=eejs.components},3:function(e,t){e.exports=eejs.i18n},32:function(e,t){e.exports=wp.element},33:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},34:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},35:function(e,t,r){"use strict";var n=r(36);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,r,s,a,o){if(o!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return r.PropTypes=r,r}},36:function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},39:function(e,t,r){var n=r(66),s=r(14);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}},4:function(e,t,r){e.exports=r(35)()},40:function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},41:function(e,t,r){var n=r(67);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},5:function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},66:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},67:function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},68:function(e,t,r){},7:function(e,t,r){var n=r(5);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},s=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),s.forEach(function(t){n(e,t,r[t])})}return e}},95:function(e,t){e.exports=wp.blocks},96:function(e,t,r){"use strict";(function(e){var n=r(7),s=r.n(n),a=r(33),o=r.n(a),i=r(34),l=r.n(i),c=r(39),u=r.n(c),p=r(40),d=r.n(p),v=r(14),f=r.n(v),b=r(41),y=r.n(b),m=r(5),h=r.n(m),_=r(32),O=r(97),g=r(16),I=r(11),S=r(3),E=r(26),j=r(98),w=r(0),A=r(4),k=r.n(A),T=r(1),D=r(99),x={showExpired:!0,limit:50},C=function(e){var t=e.eventId,r=e.datetimeId,n=e.ticketId;return 0===t&&0===r&&0===n},P=[],R=200,L=function(t){function r(e){var t;o()(this,r),t=u()(this,d()(r).call(this,e)),h()(f()(t),"setEventId",function(e){var r=null!==e&&e.value?parseInt(e.value,10):0;t.props.setAttributes({eventId:r,datetimeId:0,ticketId:0}),t.setState({datetimeQueryData:s()({},t.state.datetimeQueryData,{forEventId:r})})}),h()(f()(t),"setDatetimeId",function(e){var r=null!==e&&e.value?parseInt(e.value,10):0;t.props.setAttributes({datetimeId:r,ticketId:0}),t.setState({ticketQueryData:s()({},t.state.ticketQueryData,{forDatetimeId:r})})}),h()(f()(t),"setTicketId",function(e){var r=null!==e&&e.value?parseInt(e.value,10):0;t.props.setAttributes({ticketId:r})}),h()(f()(t),"setStatus",function(e){var r=null!==e&&e.value?e.value:w.statusModel.REGISTRATION_STATUS_ID.APPROVED;t.props.setAttributes({status:r})}),h()(f()(t),"setLimit",function(e){t.props.setAttributes({limit:parseInt(e,10)})}),h()(f()(t),"setOrderBy",function(e){t.props.setAttributes({orderBy:e})}),h()(f()(t),"setOrder",function(e){t.props.setAttributes({order:e})}),h()(f()(t),"setAvatarSize",function(e){t.props.setAttributes({avatarSize:parseInt(e,10)})}),h()(f()(t),"toggleShowGravatar",function(e){t.props.setAttributes({showGravatar:e})}),h()(f()(t),"toggleDisplayOnArchives",function(e){t.props.setAttributes({displayOnArchives:e})});var n=t.props.attributes,a=n.eventId,i=n.datetimeId;return t.state={eventQueryData:s()({},x),datetimeQueryData:s()({},x,{forEventId:a}),ticketQueryData:s()({},x,{forDatetimeId:i}),statusQueryData:s()({},x,{statusType:w.statusModel.STATUS_TYPE_REGISTRATION})},t}return y()(r,t),l()(r,[{key:"getAttendeesDisplay",value:function(){var t=this.props,r=t.isLoading,n=t.attendees,s=this.props.attributes,a=s.showGravatar,o=s.avatarSize,i={avatarWidth:o,avatarHeight:o,avatarClass:s.avatarClass};return r?e.createElement(g.Placeholder,null,e.createElement(g.Spinner,null)):C(this.props.attributes)&&n===P?e.createElement(g.Placeholder,null,Object(S.__)("To get started, select what event you want to show attendees from in the block settings.","event_espresso")):!r&&Object(T.isEmpty)(n)?e.createElement(g.Placeholder,null,Object(S.__)("There are no attendees for selected options.","event_espresso")):e.createElement(E.EventAttendeeList,{attendees:this.applyLimit(n),showGravatar:a,avatarOptions:i,isLoading:r,containerCssClass:D.a,containerId:"ee-block-event-attendees"})}},{key:"applyLimit",value:function(e){return e.length<=this.props.attributes.limit?e:e.slice(0,this.props.attributes.limit)}},{key:"getInspectorControls",value:function(t){var r=this.props.attendees.length||0;return e.createElement(O.InspectorControls,null,e.createElement(g.PanelBody,{title:Object(S.__)("Filter By Settings","event_espresso")},e.createElement(E.EditorEventSelect,{key:"attendees-event-select",selected:t.eventId,onSelect:this.setEventId,queryData:this.state.eventQueryData}),0!==t.eventId&&e.createElement(E.EditorDatetimeSelect,{key:"attendees-datetime-select",selected:t.datetimeId,onSelect:this.setDatetimeId,queryData:this.state.datetimeQueryData}),0!==t.datetimeId&&e.createElement(E.EditorTicketSelect,{key:"attendees-ticket-select",selected:t.ticketId,onSelect:this.setTicketId,queryData:this.state.ticketQueryData}),e.createElement(E.EditorStatusSelect,{key:"attendees-status-select",selected:t.status,onSelect:this.setStatus,queryData:this.state.statusQueryData,label:Object(S.__)("Select Registration Status","event_espresso")}),e.createElement(E.QueryLimit,{label:Object(S.__)("Number of Attendees to Display:","event_espresso"),limit:t.limit,onLimitChange:this.setLimit,min:1,withSlider:!1,help:Object(S.sprintf)(Object(S._n)("Used to adjust the number of attendees displayed (There is %d total attendee for the current filter settings).","Used to adjust the number of attendees displayed (There are %d total attendees for the current filter settings).",r,"event_espresso"),r)}),e.createElement(g.SelectControl,{label:Object(S.__)("Order Attendees by:","event_espresso"),value:t.orderBy,options:[{label:Object(S.__)("Attendee id","event_espresso"),value:"id"},{label:Object(S.__)("Last name only","event_espresso"),value:"lastNameOnly"},{label:Object(S.__)("First name only","event_espresso"),value:"firstNameOnly"},{label:Object(S.__)("First, then Last name","event_espresso"),value:"firstThenLastName"},{label:Object(S.__)("Last, then First name","event_espresso"),value:"lastThenFirstName"}],onChange:this.setOrderBy}),e.createElement(g.SelectControl,{label:Object(S.__)("Sort order:","event_espresso"),value:t.order,options:[{label:Object(S.__)("Ascending","event_espresso"),value:w.QUERY_ORDER_ASC},{label:Object(S.__)("Descending","event_espresso"),value:w.QUERY_ORDER_DESC}],onChange:this.setOrder})),e.createElement(g.PanelBody,{title:Object(S.__)("Gravatar Setttings","event_espresso")},e.createElement(g.ToggleControl,{label:Object(S.__)("Display Gravatar","event_espresso"),checked:t.showGravatar,onChange:this.toggleShowGravatar,help:t.showGravatar?Object(S.__)("Gravatar images are shown for each attendee.","event_espresso"):Object(S.__)("No gravatar images are shown for each attendee.","event_espresso")}),t.showGravatar&&e.createElement(g.RangeControl,{label:Object(S.__)("Size of Gravatar","event_espresso"),value:t.avatarSize,min:10,max:128,onChange:this.setAvatarSize})),e.createElement(j.NotWithPostTypeCheck,{excludedPostTypeSlugs:"page"},e.createElement(g.PanelBody,{title:Object(S.__)("Archive Settings","event_espresso")},e.createElement(g.ToggleControl,{label:Object(S.__)("Display on Archives","event_espresso"),checked:t.displayOnArchives,onChange:this.toggleDisplayOnArchives,help:t.displayOnArchives?Object(S.__)("Attendees are shown whenever this post is listed in an archive view.","event_espresso"):Object(S.__)("Attendees are hidden whenever this post is listed in an archive view.","event_espresso")}))))}},{key:"render",value:function(){return e.createElement(_.Fragment,null,this.getAttendeesDisplay(),this.getInspectorControls(this.props.attributes))}}]),r}(_.Component);h()(L,"propTypes",{attendees:k.a.array,isLoading:k.a.bool,attributes:k.a.shape({eventId:k.a.number,datetimeId:k.a.number,ticketId:k.a.number,status:k.a.string,showGravatar:k.a.bool,displayOnArchives:k.a.bool,limit:k.a.number,orderBy:k.a.oneOf(["id","lastNameOnly","firstNameOnly","firstThenLastName","lastThenFirstName"]),order:k.a.oneOf(w.ALLOWED_ORDER_VALUES),avatarSize:k.a.number,avatarClass:k.a.string})}),h()(L,"defaultProps",{attendees:[],isLoading:!0,attributes:{eventId:0,datetimeId:0,ticketId:0,status:w.statusModel.REGISTRATION_STATUS_ID.APPROVED,showGravatar:!0,displayOnArchives:!1,limit:100,orderBy:"lastThenFirstName",order:w.QUERY_ORDER_ASC,avatarSize:24,avatarClass:"contact"}}),t.a=Object(I.withSelect)(function(e,t){var r=s()({},L.defaultProps.attributes),n=t.attributes,a=n.eventId,o=void 0===a?r.eventId:a,i=n.datetimeId,l=void 0===i?r.datetimeId:i,c=n.ticketId,u=void 0===c?r.ticketId:c,p=n.status,d=void 0===p?r.status:p,v=n.orderBy,f=void 0===v?r.orderBy:v,b=n.order,y=void 0===b?r.order:b,m=n.limit,h=void 0===m?r.limit:m,_={forEventId:o,forDatetimeId:l,forTicketId:u,forStatusId:d,showGravatar:!0,defaultWhereConditions:"full_this_minimum_others",order:y,orderBy:f,limit:R=!h||isNaN(h)||h<=R?R:h},O=w.attendeeModel.getQueryString(_),g=e("eventespresso/lists"),I=g.getAttendees,S=g.isRequestingAttendees;return s()({},L.defaultProps,t,{attributes:s()({},L.defaultProps.attributes,t.attributes),attendees:C({eventId:o,datetimeId:l,ticketId:u})?P:I(O),isLoading:S(O)})})(L)}).call(this,r(13))},97:function(e,t){e.exports=wp.editor},98:function(e,t){e.exports=eejs.editorHocs},99:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n="ee-core-blocks event-espresso-blocks"}},[[162,0]]]);