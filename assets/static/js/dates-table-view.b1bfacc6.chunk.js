(this.webpackJsonproot=this.webpackJsonproot||[]).push([[6],{3029:function(e,t,a){"use strict";var n=a(0),i=a(5),s=a(10),c=a(13);t.a=function(e){var t=e.datetime,a=Object(c.useRegistrationsLink)({datetime_id:t.dbId}),l=Object(i.__)("view ALL registrations for this date.");return Object(n.jsx)(s.RegistrationsLink,{href:a,tooltip:l})}},3030:function(e,t,a){"use strict";var n=a(0),i=a(1),s=a(5),c=a(18),l=a(10),r=a(13);t.a=function(e){var t=e.entity,a=Object(r.useDatetimeMutator)(t.id).updateEntity,o=Object(r.useUpdateRelatedTickets)(t.id),u=Object(r.useTicketQuantityForCapacity)(),b=Object(i.useCallback)((function(e){var n=Object(c.parseInfinity)(e);if(n!==t.capacity){a({capacity:n});var i=u(n);o(i)}}),[t.capacity,a,u,o]);return Object(n.jsx)(l.InlineEditInfinity,{onChange:b,tooltip:Object(s.__)("edit capacity (registration limit)\u2026"),value:"".concat(t.capacity)})}},3034:function(e,t,a){"use strict";var n=a(2),i=a(0),s=a(7),c=a(10),l=a(1124),r=function(e){return Object(l.a)("datetime",e)};t.a=function(e){var t=e.entity,a=Object(s.a)(e,["entity"]),l=r(t);return Object(i.jsx)(c.EntityActionsMenu,Object(n.a)(Object(n.a)({},a),{},{menuItems:l}))}},3035:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=a(1),s=a(5),c=a(13),l=a(10),r=function(e){var t=e.className,a=e.entity,r=e.view,o=void 0===r?"card":r,u=Object(c.useDatetimeMutator)(a.id).updateEntity,b=Object(s.__)("edit title\u2026"),d=a.name||b,j="card"===o&&2,O=Object(i.useCallback)((function(e){e!==a.name&&u({name:e})}),[a.name,u]);return Object(n.jsx)(l.InlineEditText,{className:t,lineCount:j,onChange:O,tag:"table"===o?"div":"h4",tooltip:b,value:d})}},3038:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(5),s=a(96),c=a(13),l=a(24),r=a(1),o=a(11),u=a.n(o),b=a(25),d=a(352),j=a.n(d),O=a(559),m=a.n(O),p=a(10),f=a(30),y=a(566),_=a(18),v=a(3029),h=a(3034),x=a(3030),k=a(3035),g=a(2),A=a(14),D=Object(l.withFeature)("use_bulk_edit")((function(e){var t=Object(c.useVisibleDatetimeIds)(),a=Object(A.a)(t,1)[0];return Object(n.jsx)(s.ActionCheckbox,Object(g.a)(Object(g.a)({},e),{},{visibleEntityIds:a}))})),C=Object(p.addZebraStripesOnMobile)(["row","stripe","name","actions"]),E=function(){var e=Object(c.useLazyDatetime)();return Object(r.useCallback)((function(t){var a=t.entityId,i=t.filterState,s=e(a),l=i.displayStartOrEndDate,r=i.showBulkActions,o=Object(y.getDatetimeBackgroundColorClassName)(s),d=s.dbId||Object(_.shortenGuid)(s.id),O=Object(y.datetimeStatus)(s),p=[{className:u()("ee-entity-list-status-stripe",o),key:"stripe",showValueOnMobile:!0,textAlign:"center",value:s.name},r&&{key:"cell",size:"micro",textAlign:"center",value:Object(n.jsx)(D,{dbId:s.dbId,id:s.id})},{key:"id",size:"micro",textAlign:"end",value:d},{className:"ee-col-name ee-rspnsv-table-hide-on-mobile",key:"name",size:"huge",value:Object(n.jsx)(k.a,{className:"ee-entity-list-text ee-focus-priority-5",entity:s,view:"table"})},{key:"start",size:"default",value:Object(b.format)(new Date(s.startDate),f.ENTITY_LIST_DATE_TIME_FORMAT)},{key:"end",size:"default",value:Object(b.format)(new Date(s.endDate),f.ENTITY_LIST_DATE_TIME_FORMAT)},{className:"ee-col__inline-edit",key:"capacity",size:"tiny",textAlign:"end",value:Object(n.jsx)(x.a,{entity:s})},{key:"sold",size:"tiny",textAlign:"end",value:s.sold||0},{key:"registrations",size:"smaller",textAlign:"center",value:Object(n.jsx)(v.a,{datetime:s})},{key:"actions",size:"big",textAlign:"center",value:Object(n.jsx)(h.a,{entity:s})}].filter(Boolean),g=j()(Object(c.filterCellByStartOrEndDate)(l));return{cells:m()(g,C)(p),className:O,id:"ee-editor-date-list-view-row-".concat(s.id),key:"row-".concat(s.id),type:"row"}}),[e])},w=function(){var e=Object(r.useMemo)((function(){return{className:"ee-entity-list-status-stripe",key:"stripe",size:"nano",textAlign:"center",value:""}}),[]),t=Object(r.useMemo)((function(){return{key:"id",size:"micro",textAlign:"end",value:Object(i.__)("ID")}}),[]),a=Object(r.useMemo)((function(){return{key:"name",size:"huge",value:Object(i.__)("Name")}}),[]),s=Object(r.useMemo)((function(){return{key:"start",size:"default",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Start Date")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Start")})]})}}),[]),l=Object(r.useMemo)((function(){return{key:"end",size:"default",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("End Date")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("End")})]})}}),[]),o=Object(r.useMemo)((function(){return{className:"ee-col__inline-edit",key:"capacity",size:"tiny",textAlign:"end",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Capacity")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Cap")})]})}}),[]),u=Object(r.useMemo)((function(){return{key:"sold",size:"tiny",textAlign:"end",value:Object(i.__)("Sold")}}),[]),b=Object(r.useMemo)((function(){return{key:"registrations",size:"smaller",textAlign:"center",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Reg list")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Regs")})]})}}),[]),d=Object(r.useMemo)((function(){return{key:"actions",size:"big",textAlign:"center",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Actions")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Actions")})]})}}),[]);return Object(r.useCallback)((function(i){var r=i.displayStartOrEndDate,j=i.showBulkActions;return{cells:[e,j&&{key:"checkbox",size:"micro",textAlign:"center",value:Object(n.jsx)("div",{className:"ee-rspnsv-table-hide-on-mobile",children:Object(n.jsx)(D,{})})},t,a,s,l,o,u,b,d].filter(Boolean).filter(Object(c.filterCellByStartOrEndDate)(r)),className:"ee-editor-date-list-items-header-row",key:"dates-list-header",primary:!0,type:"row"}}),[d,o,l,t,a,b,u,s,e])},T=a(22),N=a(12),S=a(763),I=a.n(S),z=a(3026),F=a(2973),M=a(3027),B=a(59),L=a(41),R=a.n(L),G=a(63),V=a(456),J=a(157),P=function(){var e=Object(G.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(J.yupToFinalFormErrors)(U,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=V.object({name:V.string().min(3,(function(){return Object(i.__)("Name must be at least three characters")}))}),Y=Object(B.intervalsToOptions)(I()(["months","weeks","days","hours","minutes"],B.DATE_INTERVALS),!0),q=function(e){var t=e.onSubmit,a=Object(r.useCallback)((function(e,a){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return t.apply(void 0,[e,a].concat(i))}),[t]),n=Object(T.useMemoStringify)({className:"ee-form-item-pair"});return Object(r.useMemo)((function(){return Object(g.a)(Object(g.a)({},e),{},{onSubmit:a,validate:P,layout:"horizontal",debugFields:["values","errors"],sections:[{name:"basics",icon:z.a,title:Object(i.__)("Basics"),fields:[{name:"name",label:Object(i.__)("Name"),fieldType:"text",min:3},{name:"description",label:Object(i.__)("Description"),fieldType:"simple-text-editor"}]},{name:"dates",icon:F.a,title:Object(i.__)("Dates"),fields:[{name:"shiftDates",label:Object(i.__)("Shift dates"),fieldType:"group",formControlProps:{className:"shift-dates"},subFields:[{name:"value",fieldType:"number",min:1},{name:"unit",fieldType:"select",options:Y},{name:"type",fieldType:"select",options:[{label:"",value:""},{label:Object(i.__)("earlier"),value:"earlier"},{label:Object(i.__)("later"),value:"later"}]}]}]},{name:"details",icon:M.a,title:Object(i.__)("Details"),fields:[{name:"capacity",label:Object(i.__)("Capacity"),fieldType:"number",parseAsInfinity:!0,min:-1,formControlProps:n}]}]})}),[n,e,a])},Q=function(e){var t=Object(l.useBulkEdit)(),a=t.getSelected,n=t.unSelectAll,i=Object(c.useDatetimes)(),s=Object(c.useBulkEditDatetimes)().updateEntities;return Object(r.useCallback)((function(t){e(),n();var l=Object(c.formToBulkUpdateInput)(t,i,a());s(l)}),[i,a,e,n,s])},Z=function(e){var t=e.onClose,a=e.isOpen,c=Q(t),l=q({onSubmit:c});return Object(n.jsx)(s.BulkEditDetails,{formConfig:l,isOpen:a,onClose:t,title:Object(i.__)("Bulk edit date details"),warning:Object(i.__)("any changes will be applied to ALL of the selected dates.")})},H=function(e){var t=e.areTrashedDates,a=e.onClose,n=Object(l.useBulkEdit)(),i=n.getSelected,s=n.unSelectAll,o=Object(c.useBulkDeleteDatetimes)();return Object(r.useCallback)((function(){a(),s(),o(i(),t)}),[t,o,i,a,s])},K=function(e){var t=e.areTrashedDates,a=e.onClose,s=H({areTrashedDates:t,onClose:a}),c=Object(p.useConfirmationDialog)({message:t?Object(i.__)("Are you sure you want to permanently delete these datetimes? This action can NOT be undone!"):Object(i.__)("Are you sure you want to trash these datetimes?"),title:t?Object(i.__)("Delete datetimes permanently"):Object(i.__)("Trash datetimes"),onConfirm:s,onCancel:a}),l=c.confirmationDialog,o=c.onOpen;return Object(r.useEffect)((function(){return o()}),[]),Object(n.jsx)(n.Fragment,{children:l})},W=["edit-details","delete",""],X=Object(l.withFeature)("use_bulk_edit")((function(){var e=Object(r.useState)(""),t=Object(A.a)(e,2),a=t[0],o=t[1],u=Object(l.useBulkEdit)(),b=Object(T.useDisclosure)(),d=b.isOpen,j=b.onOpen,O=b.onClose,m=Object(c.useDatesListFilterState)(),f=m.status,y=m.showBulkActions,_=f===N.DatetimeStatus.trashedOnly,v=Object(T.useMemoStringify)(c.hooks.applyFilters("eventEditor.datetimes.bulkEdit.actions",[{value:"",label:Object(i.__)("bulk actions")},{value:"edit-details",label:Object(i.__)("edit datetime details")},{value:"delete",label:_?Object(i.__)("delete datetimes"):Object(i.__)("trash datetimes")}])),h=Object(r.useCallback)((function(e){o(e),W.includes(e)&&j(),c.hooks.doAction("eventEditor.datetimes.bulkEdit.apply",e,u)}),[u,j]);return Object(n.jsxs)(p.Collapsible,{show:y,children:[Object(n.jsx)(s.BulkActions,{Checkbox:D,defaultAction:"",id:"ee-bulk-edit-dates-actions",onApply:h,options:v}),d&&Object(n.jsxs)(n.Fragment,{children:["edit-details"===a&&Object(n.jsx)(Z,{isOpen:!0,onClose:O}),"delete"===a&&Object(n.jsx)(K,{areTrashedDates:_,onClose:O})]})]})}));t.default=Object(l.withBulkEdit)((function(){var e=Object(c.useDatesListFilterState)(),t=Object(c.useFilteredDateIds)(),a=E(),l=w();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X,{}),Object(n.jsx)(s.EntityTable,{bodyRowGenerator:a,domain:c.domain,entityIds:t,filterState:e,headerRowGenerator:l,listId:c.datesList,tableCaption:Object(i.__)("Event Dates"),tableId:"date-entities-table-view"})]})}))},403:function(e,t,a){var n=a(53)(a(126));e.exports=n},559:function(e,t,a){var n=a(98),i=a(834),s=a(403),c=a(835);e.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return n(arguments[0].length,s(i,arguments[0],c(arguments)))}},608:function(e,t,a){var n=a(76);e.exports=function(e,t){return function(){var a=arguments.length;if(0===a)return t();var i=arguments[a-1];return n(i)||"function"!==typeof i[e]?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,a-1))}}},834:function(e,t){e.exports=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}}},835:function(e,t,a){var n=a(608),i=a(29)(n("tail",a(836)(1,1/0)));e.exports=i},836:function(e,t,a){var n=a(608),i=a(53)(n("slice",(function(e,t,a){return Array.prototype.slice.call(a,e,t)})));e.exports=i}}]);
//# sourceMappingURL=dates-table-view.b1bfacc6.chunk.js.map