(this.webpackJsonproot=this.webpackJsonproot||[]).push([[24],{3087:function(t,e,i){"use strict";var a=i(5),n=i(8),c=i(12),s=i(0);e.a=function(t){var e=t.ticket,i=Object(c.useRegistrationsLink)({ticket_id:e.dbId}),r=Object(a.__)("total registrations."),u=Object(a.__)("view ALL registrations for this ticket.");return Object(s.jsx)(n.ItemCount,{count:e.registrationCount,emphasizeZero:!1,title:r,children:Object(s.jsx)(n.RegistrationsLink,{href:i,tooltip:u})})}},3088:function(t,e,i){"use strict";var a=i(1),n=i(5),c=i(18),s=i(8),r=i(12),u=i(0);e.a=function(t){var e=t.entity,i=Object(r.useTicketMutator)(e.id).updateEntity,o=Object(a.useCallback)((function(t){var a=Object(c.parseInfinity)(t);a!==e.quantity&&i({quantity:a})}),[e.quantity,i]);return Object(u.jsx)(s.InlineEditInfinity,{"data-testid":"ee-ticket-inline-qty",onChange:o,tooltip:Object(n.__)("edit quantity of tickets available\u2026"),value:"".concat(e.quantity)})}},3089:function(t,e,i){"use strict";i.d(e,"a",(function(){return u})),i.d(e,"b",(function(){return _}));var a=i(1),n=i(5),c=i(12),s=i(8),r=i(0),u=function(t){var e=t.className,i=t["data-testid"],u=t.entity,o=t.view,l=void 0===o?"card":o,d=Object(c.useTicketMutator)(u.id).updateEntity,b="card"===l&&2,j=Object(a.useCallback)((function(t){t!==u.name&&d({name:t})}),[u.name,d]),O=Object(n.__)("edit title\u2026"),p=u.name||O;return Object(r.jsx)(s.InlineEditText,{className:e,"data-testid":i,lineCount:b,onChange:j,tag:"table"===l?"div":"h4",tooltip:O,value:p})},o=i(27),l=i(76),d=i(23),b=i(21),j=i(10),O=i(124),p=i(43),y=i(2),k=i(57),m=i(39),f=i.n(m),v=function(t){var e=Object(c.useLazyTicket)(),i=Object(c.useTicketPrices)(),n=Object(O.useInitialState)({ticketId:t,getTicket:e,getTicketPrices:i}),s=Object(O.useDefaultBasePrice)(),r=Object(O.useMutatePrices)(),u=Object(c.useTicketMutator)(t).updateEntity;return Object(a.useCallback)(function(){var t=Object(k.a)(f.a.mark((function t(e){var i,a,c,o,l,d,b,k,m;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n(null),c=Object(y.a)(Object(y.a)({},a.ticket),{},{price:e}),a=Object(y.a)(Object(y.a)({},a),{},{ticket:c}),o=Object(j.getBasePrice)(a.prices),l=Object(j.getPriceModifiers)(a.prices),d=Object(O.calculateBasePrice)(null===(i=a.ticket)||void 0===i?void 0:i.price,a.prices),b=o?Object(y.a)(Object(y.a)({},o),{},{isModified:!0}):Object(y.a)(Object(y.a)({},s),{},{order:1,isNew:!0}),k=[Object(y.a)(Object(y.a)({},b),{},{amount:d})].concat(Object(p.a)(l)),t.next=10,r(k);case 10:return m=t.sent,t.next=13,u({price:e,reverseCalculate:!0,prices:m});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[s,n,r,u])},_=function(t){var e=t.entity,i=t.className,c=Object(b.useMoneyDisplay)(),u=c.afterAmount,p=c.beforeAmount,y=c.formatAmount,k=v(e.id),m=Object(a.useCallback)((function(t){var i=t.amount,a=parseFloat(i);a!==e.price&&k(a)}),[k,e.price]),f=Object(O.useLockedTicketAction)(e,"COPY/TRASH"),_=f.alertContainer,x=f.showAlert,C=Object(d.useMemoStringify)({className:i}),g=Object(j.isLocked)(e),T=Object(n.__)("edit ticket total\u2026");return g?Object(r.jsxs)(o.Clickable,{as:"div",onClick:x,children:[Object(r.jsx)(l.CurrencyDisplay,{className:i,value:e.price}),_]}):Object(r.jsx)(s.InlineEditCurrency,{afterAmount:u,amount:e.price,beforeAmount:p,formatAmount:y,id:e.id,placeholder:Object(n.__)("set price\u2026"),wrapperProps:C,onChange:m,tag:"h3",tooltip:T})}},3092:function(t,e,i){"use strict";var a=i(2),n=i(7),c=i(8),s=i(729),r=function(t){return Object(s.b)("ticket",t)},u=i(0);e.a=function(t){var e=t.entity,i=Object(n.a)(t,["entity"]),s=r(e);return Object(u.jsx)(c.EntityActionsMenu,Object(a.a)(Object(a.a)({},i),{},{menuItems:s}))}},3096:function(t,e,i){"use strict";i.r(e);var a=i(8),n=i(12),c=i(583),s=i(2),r=i(1),u=i(5),o=i(30),l=i(76),d=i(21),b=i(3089),j=i(3087),O=i(3088),p=i(0),y=function(t){var e=t.adminUrl,i=t.entity,n=t.eventId,c=Object(r.useMemo)((function(){return[{id:"ee-ticket-sold",label:Object(u.__)("sold"),value:Object(p.jsx)(a.EntityDetailsPanelSold,{adminUrl:e,dbId:i.dbId,eventId:n,sold:i.sold,type:"ticket"})},{id:"ee-ticket-qty",label:Object(u.__)("quantity"),value:Object(p.jsx)(O.a,{entity:i})},{id:"ee-ticket-registrations",label:Object(u.__)("reg list"),value:Object(p.jsx)(j.a,{ticket:i})}]}),[e,n,i]);return Object(p.jsx)(a.EntityDetailsPanel,{details:c,className:"ee-editor-ticket-details-sold-rsrvd-qty-div"})},k=function(t){var e=t.entity,i=Object(d.useConfig)().siteUrl,a=Object(r.useMemo)((function(){return Object(n.getAdminUrl)({adminSiteUrl:i.admin,page:o.ADMIN_ROUTES.REGISTRATIONS})}),[i.admin]),c=Object(n.useEventId)(),j=Object(n.useTicketMutator)(e.id).updateEntity,O=Object(r.useCallback)((function(t){j({description:t})}),[j]),k=Object(r.useMemo)((function(){return n.hooks.applyFilters("eventEditor.tickets.inlineDescriptionProps",o.EMPTY_OBJECT,e)}),[e]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b.a,{className:"entity-card-details__name",entity:e}),Object(p.jsx)(l.SimpleTextEditorModal,Object(s.a)({className:"entity-card-details__text",onUpdate:O,text:e.description,title:Object(u.__)("Edit description"),tooltip:Object(u.__)("edit description\u2026")},k)),Object(p.jsx)(b.b,{className:"entity-card-details__price",entity:e}),Object(p.jsx)(y,{adminUrl:a,entity:e,eventId:c})]})},m=i(13),f=function(t){var e=t.entity,i=Object(n.useTicketsListFilterState)().displayStartOrEndDate,a=Object(n.useTicketMutator)(e.id).updateEntity,s=Object(d.useTimeZoneTime)().siteTimeToUtc,o=Object(r.useCallback)((function(t){var e=Object(m.a)(t,2),i=e[0],n=e[1],c=s(i).toISOString(),r=s(n).toISOString();a({startDate:c,endDate:r})}),[s,a]),b=Object(c.getTicketStatusTextLabel)(e);return e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.CalendarDateSwitcher,{displayDate:i,endDate:e.endDate,startDate:e.startDate}),Object(p.jsx)(l.EditDateRangeButton,{endDate:e.endDate,header:Object(u.__)("Edit Ticket Sale Dates"),onChange:o,popoverPlacement:"left-end",startDate:e.startDate,tooltip:Object(u.__)("edit ticket sales start and end dates")}),Object(p.jsx)("div",{className:"ee-entity-status-label",children:b})]}):null},v=i(3092),_=function(t){var e=t.id,i=Object(n.useTicketItem)({id:e}),s=Object(c.ticketStatusBgColorClassName)(i);return i?Object(p.jsx)(a.EntityCard,{actionsMenu:Object(p.jsx)(v.a,{entity:i,layout:a.EntityActionsMenuLayout.Vertical}),details:Object(p.jsx)(k,{entity:i}),entity:i,reverse:!0,sidebar:Object(p.jsx)(f,{entity:i}),sidebarClass:s}):null};e.default=function(){var t=Object(n.useFilteredTicketIds)();return Object(p.jsx)(a.EntityCardList,{EntityCard:_,entityIds:t})}}}]);
//# sourceMappingURL=tickets-card-view.df8bebc4.chunk.js.map