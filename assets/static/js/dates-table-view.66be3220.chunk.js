(this.webpackJsonproot=this.webpackJsonproot||[]).push([[6],{1730:function(e,t,a){"use strict";var i=a(3),n=a(5),s=a(11),c=a(1);t.a=function(e){var t=e.datetime,a=Object(s.useRegistrationsLink)({datetime_id:t.dbId}),l=Object(i.__)("view ALL registrations for this date.");return Object(c.jsx)(n.RegistrationsLink,{href:a,tooltip:l})}},1731:function(e,t,a){"use strict";var i=a(0),n=a(3),s=a(12),c=a(5),l=a(11),r=a(1);t.a=function(e){var t=e.entity,a=Object(l.useDatetimeMutator)(t.id).updateEntity,o=Object(l.useUpdateRelatedTickets)(),u=Object(l.useTicketQuantityForCapacity)(),b=Object(i.useCallback)((function(e){var i=Object(s.parseInfinity)(e);if(i!==t.capacity){a({capacity:i});var n=u(i);o(t.id,n)}}),[t.capacity,t.id,a,u,o]);return Object(r.jsx)(c.InlineEditInfinity,{"data-testid":"ee-datetime-inline-cap",onChange:b,tooltip:Object(n.__)("edit capacity (registration limit)\u2026"),value:"".concat(t.capacity)})}},1735:function(e,t,a){"use strict";var i=a(2),n=a(6),s=a(5),c=a(774),l=function(e){return Object(c.a)("datetime",e)},r=a(1);t.a=function(e){var t=e.entity,a=Object(n.a)(e,["entity"]),c=l(t);return Object(r.jsx)(s.EntityActionsMenu,Object(i.a)(Object(i.a)({},a),{},{menuItems:c}))}},1736:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(0),n=a(3),s=a(11),c=a(5),l=a(1),r=function(e){var t=e.className,a=e["data-testid"],r=e.entity,o=e.view,u=void 0===o?"card":o,b=Object(s.useDatetimeMutator)(r.id).updateEntity,d=Object(n.__)("edit title\u2026"),j=r.name||d,O="card"===u&&2,m=Object(i.useCallback)((function(e){e!==r.name&&b({name:e})}),[r.name,b]);return Object(l.jsx)(c.InlineEditText,{className:t,"data-testid":a,lineCount:O,onChange:m,tag:"table"===u?"div":"h4",tooltip:d,value:j})}},1739:function(e,t,a){"use strict";a.r(t);var i=a(3),n=a(60),s=a(11),c=a(20),l=a(0),r=a(8),o=a.n(r),u=a(105),b=a(4),d=a(5),j=a(28),O=a(313),m=a(10),p=a(1730),f=a(1735),y=a(1731),_=a(1736),v=a(2),h=a(7),k=a(1),x=Object(c.withFeature)("use_bulk_edit")((function(e){var t=Object(s.useVisibleDatetimeIds)(),a=Object(h.a)(t,1)[0];return Object(k.jsx)(n.ActionCheckbox,Object(v.a)(Object(v.a)({},e),{},{visibleEntityIds:a}))})),g=Object(d.addZebraStripesOnMobile)(["row","stripe","name","actions"]),D=function(){var e=Object(s.useDatetimes)(),t=Object(l.useCallback)((function(t){return Object(m.findEntityByGuid)(e)(t)}),[e]),a=Object(s.useLazyDatetime)(),i=Object(c.useTimeZoneTime)().formatForSite;return Object(l.useCallback)((function(e){var n=e.entityId,c=e.filterState,l=t(n)||a(n),r=c.displayStartOrEndDate,d=c.showBulkActions,m=Object(O.getDatetimeBackgroundColorClassName)(l),v=l.dbId||0,h=Object(O.datetimeStatus)(l),D=[{className:o()("ee-entity-list-status-stripe",m),key:"stripe",showValueOnMobile:!0,textAlign:"center",value:l.name},d&&{key:"cell",size:"micro",textAlign:"center",value:Object(k.jsx)(x,{dbId:l.dbId,id:l.id})},{key:"id",size:"micro",textAlign:"end",value:v},{className:"ee-col-name ee-rspnsv-table-hide-on-mobile",key:"name",size:"huge",value:Object(k.jsx)(_.a,{className:"ee-entity-name ee-entity-list-text ee-focus-priority-5","data-testid":"ee-entity-list-view-row-editable-".concat(l.dbId),entity:l,view:"table"})},{key:"start",size:"default",value:i(Object(u.default)(l.startDate),j.ENTITY_LIST_DATE_TIME_FORMAT)},{key:"end",size:"default",value:i(Object(u.default)(l.endDate),j.ENTITY_LIST_DATE_TIME_FORMAT)},{className:"ee-col__inline-edit",key:"capacity",size:"tiny",textAlign:"end",value:Object(k.jsx)(y.a,{entity:l})},{key:"sold",size:"tiny",textAlign:"end",value:l.sold||0},{key:"registrations",size:"smaller",textAlign:"center",value:Object(k.jsx)(p.a,{datetime:l})},{key:"actions",size:"big",textAlign:"center",value:Object(k.jsx)(f.a,{entity:l})}].filter(Boolean),A=b.filter(Object(s.filterCellByStartOrEndDate)(r));return{cells:b.pipe(A,g)(D),className:h,"data-testid":"ee-datetime-list-view-row-".concat(l.dbId),id:"ee-editor-datetime-list-view-row-".concat(l.id),key:"row-".concat(l.id),rowClassName:"ee-entity-list-item",type:"row"}}),[i,t,a])},A=function(){var e=Object(l.useMemo)((function(){return{className:"ee-entity-list-status-stripe",key:"stripe",size:"nano",textAlign:"center",value:""}}),[]),t=Object(l.useMemo)((function(){return{key:"id",size:"micro",textAlign:"end",value:Object(i.__)("ID")}}),[]),a=Object(l.useMemo)((function(){return{key:"name",size:"huge",value:Object(i.__)("Name")}}),[]),n=Object(l.useMemo)((function(){return{key:"start",size:"default",value:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Start Date")}),Object(k.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Start")})]})}}),[]),c=Object(l.useMemo)((function(){return{key:"end",size:"default",value:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("End Date")}),Object(k.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("End")})]})}}),[]),r=Object(l.useMemo)((function(){return{className:"ee-col__inline-edit",key:"capacity",size:"tiny",textAlign:"end",value:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Capacity")}),Object(k.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Cap")})]})}}),[]),o=Object(l.useMemo)((function(){return{key:"sold",size:"tiny",textAlign:"end",value:Object(i.__)("Sold")}}),[]),u=Object(l.useMemo)((function(){return{key:"registrations",size:"smaller",textAlign:"center",value:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Reg list")}),Object(k.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Regs")})]})}}),[]),b=Object(l.useMemo)((function(){return{key:"actions",size:"big",textAlign:"center",value:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Actions")}),Object(k.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Actions")})]})}}),[]);return Object(l.useCallback)((function(i){var l=i.displayStartOrEndDate,d=i.showBulkActions;return{cells:[e,d&&{key:"checkbox",size:"micro",textAlign:"center",value:Object(k.jsx)("div",{className:"ee-rspnsv-table-hide-on-mobile",children:Object(k.jsx)(x,{})})},t,a,n,c,r,o,u,b].filter(Boolean).filter(Object(s.filterCellByStartOrEndDate)(l)),className:"ee-editor-date-list-items-header-row",key:"dates-list-header",primary:!0,type:"row"}}),[b,r,c,t,a,u,o,n,e])},C=a(21),T=a(1718),w=a(1628),E=a(1719),N=a(45),S=a(43),I=a(30),F=a.n(I),z=a(211),M=a(77),B=function(){var e=Object(S.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.yupToFinalFormErrors)(L,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=z.b({name:z.c().min(3,(function(){return Object(i.__)("Name must be at least three characters")}))}),R=Object(N.intervalsToOptions)(b.pick(["months","weeks","days","hours","minutes"],N.DATE_INTERVALS),!0),G=function(e){var t=e.onSubmit,a=Object(l.useCallback)((function(e,a){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return t.apply(void 0,[e,a].concat(n))}),[t]),n=Object(C.useMemoStringify)({className:"ee-form-item-pair"});return Object(l.useMemo)((function(){return Object(v.a)(Object(v.a)({},e),{},{onSubmit:a,validate:B,layout:"horizontal",debugFields:["values","errors"],sections:[{name:"basics",icon:T.a,title:Object(i.__)("Basics"),fields:[{name:"name",label:Object(i.__)("Name"),fieldType:"text",min:3},{name:"description",label:Object(i.__)("Description"),fieldType:"simple-text-editor"}]},{name:"dates",icon:w.a,title:Object(i.__)("Dates"),fields:[{name:"shiftDates",label:Object(i.__)("Shift dates"),fieldType:"group",formControlProps:{className:"shift-dates"},subFields:[{name:"value",fieldType:"number",min:1},{name:"unit",fieldType:"select",options:R},{name:"type",fieldType:"select",options:[{label:"",value:""},{label:Object(i.__)("earlier"),value:"earlier"},{label:Object(i.__)("later"),value:"later"}]}]}]},{name:"details",icon:E.a,title:Object(i.__)("Details"),fields:[{name:"capacity",label:Object(i.__)("Capacity"),fieldType:"number",parseAsInfinity:!0,min:-1,formControlProps:n}]}]})}),[n,e,a])},V=function(e){var t=Object(c.useBulkEdit)(),a=t.getSelected,i=t.unSelectAll,n=Object(s.useDatetimes)(),r=Object(s.useBulkEditDatetimes)().updateEntities;return Object(l.useCallback)((function(t){e(),i();var c=Object(s.formToBulkUpdateInput)(t,n,a());r(c)}),[n,a,e,i,r])},J=function(e){var t=e.onClose,a=e.isOpen,s=V(t),c=G({onSubmit:s});return Object(k.jsx)(n.BulkEditDetails,{formConfig:c,isOpen:a,onClose:t,title:Object(i.__)("Bulk edit date details"),warning:Object(i.__)("any changes will be applied to ALL of the selected dates.")})},P=function(e){var t=e.areTrashedDates,a=e.onClose,i=Object(c.useBulkEdit)(),n=i.getSelected,r=i.unSelectAll,o=Object(s.useBulkDeleteDatetimes)();return Object(l.useCallback)((function(){a(),r(),o(n(),t)}),[t,o,n,a,r])},U=function(e){var t=e.areTrashedDates,a=e.onClose,n=P({areTrashedDates:t,onClose:a}),s=Object(d.useConfirmationDialog)({message:t?Object(i.__)("Are you sure you want to permanently delete these datetimes? This action can NOT be undone!"):Object(i.__)("Are you sure you want to trash these datetimes?"),title:t?Object(i.__)("Delete datetimes permanently"):Object(i.__)("Trash datetimes"),onConfirm:n,onCancel:a}),c=s.confirmationDialog,r=s.onOpen;return Object(l.useEffect)((function(){return r()}),[]),Object(k.jsx)(k.Fragment,{children:c})},Y=["edit-details","delete",""],Z=Object(c.withFeature)("use_bulk_edit")((function(){var e=Object(l.useState)(""),t=Object(h.a)(e,2),a=t[0],r=t[1],o=Object(c.useBulkEdit)(),u=Object(C.useDisclosure)(),b=u.isOpen,j=u.onOpen,O=u.onClose,p=Object(s.useDatesListFilterState)(),f=p.status,y=p.showBulkActions,_=f===m.DatetimeStatus.trashedOnly,v=Object(C.useMemoStringify)(s.hooks.applyFilters("eventEditor.datetimes.bulkEdit.actions",[{value:"",label:Object(i.__)("bulk actions")},{value:"edit-details",label:Object(i.__)("edit datetime details")},{value:"delete",label:_?Object(i.__)("delete datetimes"):Object(i.__)("trash datetimes")}])),g=Object(l.useCallback)((function(e){r(e),Y.includes(e)&&j(),s.hooks.doAction("eventEditor.datetimes.bulkEdit.apply",e,o)}),[o,j]);return Object(k.jsxs)(d.Collapsible,{show:y,children:[Object(k.jsx)(n.BulkActions,{Checkbox:x,defaultAction:"",id:"ee-bulk-edit-dates-actions",onApply:g,options:v}),b&&Object(k.jsxs)(k.Fragment,{children:["edit-details"===a&&Object(k.jsx)(J,{isOpen:!0,onClose:O}),"delete"===a&&Object(k.jsx)(U,{areTrashedDates:_,onClose:O})]})]})}));t.default=Object(c.withBulkEdit)((function(){var e=Object(s.useDatesListFilterState)(),t=Object(s.useFilteredDateIds)(),a=D(),c=A();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Z,{}),Object(k.jsx)(n.EntityTable,{bodyRowGenerator:a,domain:s.domain,entityIds:t,filterState:e,headerRowGenerator:c,listId:s.datesList,tableCaption:Object(i.__)("Event Dates"),tableId:"date-entities-table-view"})]})}))}}]);
//# sourceMappingURL=dates-table-view.66be3220.chunk.js.map