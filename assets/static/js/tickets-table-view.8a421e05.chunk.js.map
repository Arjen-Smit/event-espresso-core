{"version":3,"sources":["../domains/eventEditor/src/ui/tickets/TicketRegistrationsLink.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/cardView/TicketQuantity.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/editable/EditableName.tsx","../domains/eventEditor/src/ui/tickets/hooks/useRecalculateBasePrice.ts","../domains/eventEditor/src/ui/tickets/ticketsList/editable/EditablePrice.tsx","../domains/eventEditor/src/ui/tickets/hooks/useTicketsActionMenuItems.ts","../domains/eventEditor/src/ui/tickets/ticketsList/actionsMenu/TicketActionsMenu.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/tableView/Checkbox.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/tableView/useHeaderRowGenerator.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/tableView/useBodyRowGenerator.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/formValidation.ts","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/useBulkEditFormConfig.ts","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/useSubmitForm.ts","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/EditDetails.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/delete/useOnDelete.ts","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/delete/Delete.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/buttons/EditModeButtons.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/buttons/FooterButtons.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editTogether/useOnSubmitPrices.ts","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editTogether/EditTogether.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/TPCInstance.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/useManageTPCStates.ts","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/useOnSubmit.ts","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/EditSeparately.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/EditPrices.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/bulkEdit/actions/Actions.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/tableView/TableView.tsx"],"names":["TicketRegistrationsLink","ticket","admin","useConfig","siteUrl","adminUrl","getAdminUrl","adminSiteUrl","page","ADMIN_ROUTES","REGISTRATIONS","eventId","useEventId","regListUrl","addQueryArgs","event_id","ticket_id","dbId","return","countTitle","__","tooltip","tooltipProps","useMemoStringify","placement","count","registrationCount","title","emphasizeZero","href","React","memo","getPropsAreEqual","TicketQuantity","entity","updateEntity","useTicketMutator","id","onChange","useCallback","qty","quantity","parseInfinity","onChangeValue","value","EditableName","className","view","lineCount","onChangeName","name","ticketName","fitText","tag","useRecalculateBasePrice","ticketId","getDataState","useInitialState","defaultBasePrice","useDefaultBasePrice","mutatePrices","useMutatePrices","updateTicket","ticketPrice","tpcData","updatedTicket","price","getBasePrice","prices","newPrices","order","isNew","calculateBasePrice","then","relatedPriceIds","reverseCalculate","EditablePrice","recalculateBasePrice","onChangePrice","amount","parseFloat","wrapperProps","placeholder","useTicketsActionMenuItems","useEntityActionsMenuItems","TicketActionsMenu","props","menuItems","isBulkEditEnabled","checkFeatureFlag","Checkbox","visibleTicketIds","useEdtrState","visibleEntityIds","useHeaderRowGenerator","filterState","displayStartOrEndDate","cells","key","type","filter","filterCellByStartOrEndDate","primary","useBodyRowGenerator","formatAmount","useMoneyDisplay","sortingEnabled","bgClassName","getTicketBackgroundColorClassName","shortenGuid","statusClassName","ticketStatus","cellsData","format","Date","startDate","ENTITY_LIST_DATE_TIME_FORMAT","endDate","sold","pipe","addZebraStripesOnMobile","validate","values","a","yupToFinalFormErrors","validationSchema","yup","min","unitOptions","intervalsToOptions","pick","DATE_INTERVALS","useBulkEditFormConfig","config","onSubmit","onSubmitFrom","form","restParams","adjacentFormItemProps","useMemo","layout","debugFields","sections","icon","ProfileOutlined","fields","label","fieldType","CalendarOutlined","formControlProps","subFields","options","ControlOutlined","parseAsInfinity","useSubmitForm","onClose","useBulkEdit","getSelected","unSelectAll","allTickets","useTickets","updateEntities","useBulkEditTickets","formData","input","formToBulkUpdateInput","EditDetails","isOpen","formConfig","warning","useOnDelete","areTrashedTickets","bulkDelete","useBulkDeleteTickets","Delete","onDelete","useConfirmationDialog","message","onConfirm","onCancel","confirmationDialog","onOpen","useEffect","EditModeButtons","setEditMode","onClickTogether","onClickSeparate","display","alignItems","justifyContent","height","onClick","buttonText","orientation","FooterButtons","onReset","align","topBordered","buttonType","ButtonType","PRIMARY","useOnSubmitPrices","useDataState","relatedPrices","useTicketPrices","deletePrices","useBulkDeletePrices","nonDefaultPrices","isNotDefault","getGuids","Promise","all","map","parsedAmount","toBoolean","isTaxable","withTPCContext","addDefaultPrices","useAddDefaultPrices","TPCInstance","setTPCState","getData","sprintf","useOnSubmit","getDataStates","submitPrices","Object","dataState","EditSeparately","dataStates","useRef","current","useManageTPCStates","ticketIds","Instance","EditPrices","useState","editMode","closeOnOverlayClick","Actions","action","setAction","useDisclosure","useTicketsListFilterState","status","TicketsStatus","trashedOnly","onApply","defaultAction","withBulkEdit","filteredEntities","useFilteredTickets","sortTickets","useReorderTickets","sortResponder","bodyRowGenerator","headerRowGenerator","entities","tableId","tableCaption","onSort"],"mappings":"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","file":"static/js/tickets-table-view.8a421e05.chunk.js","sourcesContent":["import React from 'react';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __ } from '@eventespresso/i18n';\n\nimport { ADMIN_ROUTES } from '@eventespresso/constants';\nimport { getAdminUrl, useEventId } from '@eventespresso/edtr-services';\nimport { getPropsAreEqual } from '@eventespresso/utils';\nimport { useConfig } from '@eventespresso/services';\nimport { useMemoStringify } from '@eventespresso/hooks';\nimport { RegistrationsLink, ItemCount } from '@eventespresso/components';\nimport { Ticket } from '@eventespresso/edtr-services';\nimport type { TooltipProps } from '@eventespresso/adapters';\n\ninterface Props {\n\tticket: Ticket;\n}\n\nconst TicketRegistrationsLink: React.FC<Props> = ({ ticket }) => {\n\tconst {\n\t\tsiteUrl: { admin },\n\t} = useConfig();\n\tconst adminUrl = getAdminUrl({ adminSiteUrl: admin, page: ADMIN_ROUTES.REGISTRATIONS });\n\tconst eventId = useEventId();\n\tconst regListUrl = addQueryArgs(adminUrl, {\n\t\tevent_id: eventId,\n\t\tticket_id: ticket.dbId,\n\t\treturn: 'edit',\n\t});\n\tconst countTitle = __('total registrations.');\n\tconst tooltip = __('view ALL registrations for this ticket.');\n\tconst tooltipProps = useMemoStringify<TooltipProps>({ placement: 'top' });\n\n\treturn (\n\t\t<ItemCount count={ticket.registrationCount} title={countTitle} emphasizeZero={false}>\n\t\t\t<RegistrationsLink href={regListUrl} tooltip={tooltip} tooltipProps={tooltipProps} />\n\t\t</ItemCount>\n\t);\n};\n\nexport default React.memo(TicketRegistrationsLink, getPropsAreEqual(['ticket', 'cacheId']));\n","import React, { useCallback } from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport { parseInfinity, getPropsAreEqual } from '@eventespresso/utils';\nimport { InlineEditInfinity, TextProps } from '@eventespresso/components';\nimport { useTicketMutator } from '@eventespresso/edtr-services';\nimport type { TicketItemProps } from '../types';\n\nconst TicketQuantity: React.FC<TicketItemProps> = ({ entity: ticket }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst onChange: TextProps['onChange'] = useCallback(\n\t\t(qty) => {\n\t\t\tconst quantity = parseInfinity(qty);\n\t\t\tif (quantity !== ticket.quantity) {\n\t\t\t\tupdateEntity({ quantity });\n\t\t\t}\n\t\t},\n\t\t[ticket.quantity, updateEntity]\n\t);\n\n\treturn (\n\t\t<InlineEditInfinity\n\t\t\tonChangeValue={onChange}\n\t\t\tvalue={`${ticket.quantity}`}\n\t\t\ttooltip={__('edit quantity of tickets available...')}\n\t\t/>\n\t);\n};\n\nexport default React.memo(TicketQuantity, getPropsAreEqual(['entity', 'cacheId']));\n","import React, { useCallback } from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport type { TicketItemProps } from '../types';\nimport { useTicketMutator } from '@eventespresso/edtr-services';\nimport { InlineEditText } from '@eventespresso/components';\nimport { getPropsAreEqual } from '@eventespresso/utils';\n\ninterface EditableNameProps extends TicketItemProps {\n\tclassName?: string;\n\tview?: 'card' | 'table';\n}\n\nconst EditableName: React.FC<Partial<EditableNameProps>> = ({ className, entity: ticket, view = 'card' }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst lineCount = view === 'card' && 2;\n\n\tconst onChangeName = useCallback(\n\t\t(name: string): void => {\n\t\t\tif (name !== ticket.name) {\n\t\t\t\tupdateEntity({ name });\n\t\t\t}\n\t\t},\n\t\t[ticket.name, updateEntity]\n\t);\n\n\tconst tooltip = __('edit title...');\n\n\tconst ticketName = ticket.name || tooltip;\n\n\treturn (\n\t\t<InlineEditText\n\t\t\tclassName={className}\n\t\t\tfitText={view === 'card'}\n\t\t\tlineCount={lineCount}\n\t\t\tonChangeValue={onChangeName}\n\t\t\ttag={view === 'table' ? 'div' : 'h4'}\n\t\t\ttooltip={tooltip}\n\t\t\tvalue={ticketName}\n\t\t/>\n\t);\n};\n\nexport default React.memo(EditableName, getPropsAreEqual(['entity', 'name']));\n","import { useCallback } from 'react';\n\nimport { EntityId } from '@eventespresso/data';\nimport { calculateBasePrice, useInitialState } from '@eventespresso/tpc';\nimport { getBasePrice } from '@eventespresso/predicates';\nimport { useDefaultBasePrice, useMutatePrices } from '@eventespresso/tpc';\nimport { useTicketMutator } from '@eventespresso/edtr-services';\n\ntype Callback = (ticketPrice: number) => void;\n\nconst useRecalculateBasePrice = (ticketId: EntityId): Callback => {\n\t// This will give us the exact state expected by `calculateBasePrice()`\n\tconst getDataState = useInitialState({ ticketId });\n\t// This default price will be added if there is none\n\tconst defaultBasePrice = useDefaultBasePrice();\n\tconst mutatePrices = useMutatePrices();\n\tconst { updateEntity: updateTicket } = useTicketMutator(ticketId);\n\n\treturn useCallback<Callback>(\n\t\t(ticketPrice) => {\n\t\t\tlet tpcData = getDataState(null);\n\t\t\t// Make sure the new ticket price is used\n\t\t\tconst updatedTicket = { ...tpcData?.ticket, price: ticketPrice };\n\t\t\ttpcData = { ...tpcData, ticket: updatedTicket };\n\n\t\t\tconst exitingBasePrice = getBasePrice(tpcData?.prices);\n\t\t\t// if the ticket does not have a base price,\n\t\t\t// that means it was free and now a price has been added ¯\\_(ツ)_/¯\n\t\t\tif (!exitingBasePrice) {\n\t\t\t\tconst newPrices = [\n\t\t\t\t\t// add the default price\n\t\t\t\t\t{ ...defaultBasePrice, order: 1, isNew: true },\n\t\t\t\t\t// add the existing ones, just in case we are dealing with aliens,\n\t\t\t\t\t// don't get me wrong, because only they can have other prices without a base price,\n\t\t\t\t\t// may be their taxation systen works differently, who knows ¯\\_(ツ)_/¯\n\t\t\t\t\t...tpcData?.prices,\n\t\t\t\t];\n\t\t\t\ttpcData = { ...tpcData, prices: newPrices };\n\t\t\t}\n\t\t\t// get the list of updated prices with the amount of base price updated\n\t\t\tconst newPrices = calculateBasePrice(tpcData);\n\n\t\t\tmutatePrices(newPrices).then((relatedPriceIds) => {\n\t\t\t\tupdateTicket({\n\t\t\t\t\t// this is the ticket prices amount\n\t\t\t\t\tprice: ticketPrice,\n\t\t\t\t\t// since ticket price has been changed, we need to go in reverse gear ◀️\n\t\t\t\t\treverseCalculate: true,\n\t\t\t\t\t// Make sure related prices are updated\n\t\t\t\t\tprices: relatedPriceIds,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[defaultBasePrice, getDataState, mutatePrices, updateTicket]\n\t);\n};\n\nexport default useRecalculateBasePrice;\n","import React, { useCallback } from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport type { TicketItemProps } from '../types';\nimport { getPropsAreEqual } from '@eventespresso/utils';\nimport { CurrencyInput } from '@eventespresso/components';\nimport useRecalculateBasePrice from '../../hooks/useRecalculateBasePrice';\nimport { useMemoStringify } from '@eventespresso/hooks';\n\ninterface EditablePriceProps extends TicketItemProps {\n\tclassName?: string;\n}\n\nconst EditablePrice: React.FC<Partial<EditablePriceProps>> = ({ entity: ticket, className }) => {\n\tconst recalculateBasePrice = useRecalculateBasePrice(ticket.id);\n\tconst onChangePrice = useCallback(\n\t\t({ amount }: any): void => {\n\t\t\tconst price = parseFloat(amount);\n\t\t\tif (price !== ticket.price) {\n\t\t\t\trecalculateBasePrice(price);\n\t\t\t}\n\t\t},\n\t\t[recalculateBasePrice, ticket.price]\n\t);\n\n\tconst wrapperProps = useMemoStringify({ className });\n\n\treturn (\n\t\t<CurrencyInput\n\t\t\tid={ticket.id}\n\t\t\tamount={ticket.price}\n\t\t\tplaceholder={__('set price...')}\n\t\t\twrapperProps={wrapperProps}\n\t\t\tonChange={onChangePrice}\n\t\t\ttag={'h3'}\n\t\t\ttooltip={__('edit ticket total...')}\n\t\t/>\n\t);\n};\n\nexport default React.memo(EditablePrice, getPropsAreEqual(['entity', 'price']));\n","import React from 'react';\n\nimport { Ticket } from '@eventespresso/edtr-services';\nimport { useEntityActionsMenuItems } from '@edtrHooks/index';\n\nconst useTicketsActionMenuItems = (ticket: Ticket): Array<React.ReactNode> => {\n\treturn useEntityActionsMenuItems('ticket', ticket);\n};\n\nexport default useTicketsActionMenuItems;\n","import React from 'react';\n\nimport type { ActionsMenuComponentProps } from '@eventespresso/registry';\nimport { EntityActionsMenu } from '@eventespresso/components';\nimport { getPropsAreEqual } from '@eventespresso/utils';\nimport { Ticket } from '@eventespresso/edtr-services';\nimport useTicketsActionMenuItems from '../../hooks/useTicketsActionMenuItems';\n\nconst TicketActionsMenu: React.FC<ActionsMenuComponentProps<Ticket>> = ({ entity, ...props }) => {\n\tconst menuItems = useTicketsActionMenuItems(entity);\n\n\treturn <EntityActionsMenu {...props} menuItems={menuItems} />;\n};\n\nexport default React.memo(TicketActionsMenu, getPropsAreEqual(['entity', 'cacheId']));\n","import React from 'react';\n\nimport { ActionCheckbox, ActionCheckboxProps } from '@eventespresso/components';\nimport { useEdtrState } from '@eventespresso/edtr-services';\nimport { checkFeatureFlag } from '@eventespresso/config';\n\nconst isBulkEditEnabled = checkFeatureFlag('bulkEdit');\n\nconst Checkbox: React.FC<ActionCheckboxProps> = (props) => {\n\tconst { visibleTicketIds } = useEdtrState();\n\tif (!isBulkEditEnabled) {\n\t\treturn null;\n\t}\n\n\treturn <ActionCheckbox {...props} visibleEntityIds={visibleTicketIds} />;\n};\n\nexport default Checkbox;\n","import React, { useCallback } from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport type { Cell, HeaderRowGeneratorFn } from '@eventespresso/components';\nimport { filterCellByStartOrEndDate } from '@eventespresso/edtr-services';\nimport { TicketsFilterStateManager } from '@edtrServices/filterState';\nimport Checkbox from './Checkbox';\n\ntype TicketsTableHeaderRowGen = HeaderRowGeneratorFn<TicketsFilterStateManager>;\n\nconst useHeaderRowGenerator = (): TicketsTableHeaderRowGen => {\n\treturn useCallback<TicketsTableHeaderRowGen>((filterState) => {\n\t\tconst { displayStartOrEndDate } = filterState;\n\n\t\tconst cellsData: Array<Cell> = [\n\t\t\t{\n\t\t\t\tkey: 'stripe',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-entity-list-status-stripe ee-rspnsv-table-column-nano',\n\t\t\t\tvalue: '',\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'checkbox',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-date-list-col-hdr ee-date-list-col-checkbox ee-rspnsv-table-column-micro',\n\t\t\t\tvalue: (\n\t\t\t\t\t<div className={'ee-rspnsv-table-hide-on-mobile'}>\n\t\t\t\t\t\t<Checkbox />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'id',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-id ee-number-column ee-rspnsv-table-column-nano',\n\t\t\t\tvalue: __('ID'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'name',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-name ee-rspnsv-table-column-bigger',\n\t\t\t\tvalue: __('Name'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'start',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-name-start ee-rspnsv-table-column-default',\n\t\t\t\tvalue: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Goes on Sale')}</span>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('On Sale')}</span>\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'end',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-end ee-rspnsv-table-column-default',\n\t\t\t\tvalue: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Sale Ends')}</span>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('Ends')}</span>\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'price',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-price ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: __('Price'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'quantity',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-quantity ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: __('Quantity'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'sold',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-sold ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: __('Sold'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'registrations',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-registrations ee-rspnsv-table-column-smaller ee-centered-column',\n\t\t\t\tvalue: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Registrations')}</span>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('Regs')}</span>\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'actions',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-actions-column ee-rspnsv-table-column-big ee-centered-column',\n\t\t\t\tvalue: <span className={'ee-rspnsv-table-long-label'}>{__('Actions')}</span>,\n\t\t\t},\n\t\t];\n\n\t\tconst cells = cellsData.filter(filterCellByStartOrEndDate(displayStartOrEndDate));\n\n\t\treturn {\n\t\t\tcells,\n\t\t\tclassName: 'ee-editor-ticket-list-items-header-row',\n\t\t\tkey: 'ticket-header-row',\n\t\t\tprimary: true,\n\t\t\ttype: 'row',\n\t\t};\n\t}, []);\n};\n\nexport default useHeaderRowGenerator;\n","import React, { useCallback } from 'react';\nimport { format } from 'date-fns';\nimport { filter, pipe } from 'ramda';\n\nimport { Cell, addZebraStripesOnMobile } from '@eventespresso/components';\nimport { filterCellByStartOrEndDate } from '@eventespresso/edtr-services';\nimport { ENTITY_LIST_DATE_TIME_FORMAT } from '@eventespresso/constants';\nimport { getTicketBackgroundColorClassName, ticketStatus } from '@eventespresso/helpers';\nimport { shortenGuid } from '@eventespresso/utils';\nimport { Ticket } from '@eventespresso/edtr-services';\nimport TicketActionsMenu from '@edtrUI/tickets/ticketsList/actionsMenu/TicketActionsMenu';\nimport { useMoneyDisplay } from '@eventespresso/services';\nimport TicketQuantity from '../cardView/TicketQuantity';\nimport { BodyRowGeneratorFn } from '@eventespresso/components';\nimport { TicketsFilterStateManager } from '@edtrServices/filterState';\nimport { EditableName } from '../editable';\nimport TicketRegistrationsLink from '../../TicketRegistrationsLink';\nimport Checkbox from './Checkbox';\n\nimport '../../../../../../../packages/styles/src/root/entity-status.css';\n\ntype TicketsTableBodyRowGen = BodyRowGeneratorFn<Ticket, TicketsFilterStateManager>;\n\nconst useBodyRowGenerator = (): TicketsTableBodyRowGen => {\n\tconst { formatAmount } = useMoneyDisplay();\n\n\treturn useCallback<TicketsTableBodyRowGen>(\n\t\t({ entity: ticket, filterState }) => {\n\t\t\tconst { displayStartOrEndDate, sortingEnabled } = filterState;\n\n\t\t\tconst bgClassName = getTicketBackgroundColorClassName(ticket);\n\t\t\tconst id = ticket.dbId || shortenGuid(ticket.id);\n\t\t\tconst statusClassName = ticketStatus(ticket);\n\n\t\t\tconst name = {\n\t\t\t\tkey: 'name',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-cell ee-ticket-list-col-name ee-col-name ee-rspnsv-table-column-bigger ee-rspnsv-table-hide-on-mobile',\n\t\t\t\tvalue: sortingEnabled ? (\n\t\t\t\t\tticket.name\n\t\t\t\t) : (\n\t\t\t\t\t<EditableName\n\t\t\t\t\t\tclassName={'ee-entity-list-text ee-focus-priority-5'}\n\t\t\t\t\t\tentity={ticket}\n\t\t\t\t\t\tview={'table'}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t};\n\n\t\t\tconst quantity = {\n\t\t\t\tkey: 'quantity',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-cell ee-ticket-list-col-quantity ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: sortingEnabled ? ticket.quantity : <TicketQuantity entity={ticket} />,\n\t\t\t};\n\n\t\t\tconst cellsData: Array<Cell> = [\n\t\t\t\t{\n\t\t\t\t\tkey: 'stripe',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName: `ee-ticket-list-cell ee-entity-list-status-stripe ${bgClassName} ee-rspnsv-table-column-nano`,\n\t\t\t\t\tvalue: <div className={'ee-rspnsv-table-show-on-mobile'}>{ticket.name}</div>,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'checkbox',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName: 'ee-date-list-cell ee-date-list-col-checkbox ee-rspnsv-table-column-micro',\n\t\t\t\t\tvalue: <Checkbox id={ticket.id} />,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'id',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-id ee-rspnsv-table-column-nano ee-number-column',\n\t\t\t\t\tvalue: id,\n\t\t\t\t},\n\t\t\t\tname,\n\t\t\t\t{\n\t\t\t\t\tkey: 'start',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-start ee-rspnsv-table-column-default',\n\t\t\t\t\tvalue: format(new Date(ticket.startDate), ENTITY_LIST_DATE_TIME_FORMAT),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'end',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-end ee-rspnsv-table-column-default',\n\t\t\t\t\tvalue: format(new Date(ticket.endDate), ENTITY_LIST_DATE_TIME_FORMAT),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'price',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName:\n\t\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-price ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\t\tvalue: formatAmount(ticket.price),\n\t\t\t\t},\n\t\t\t\tquantity,\n\t\t\t\t{\n\t\t\t\t\tkey: 'sold',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName:\n\t\t\t\t\t\t'ee-ticket-list-cell ee-ticket-list-col-sold ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\t\tvalue: ticket.sold,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'registrations',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName:\n\t\t\t\t\t\t'ee-ticket-list-cell ee-ticket-list-col-registrations ee-rspnsv-table-column-smaller ee-centered-column',\n\t\t\t\t\tvalue: sortingEnabled ? '-' : <TicketRegistrationsLink ticket={ticket} />,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'actions',\n\t\t\t\t\ttype: 'cell',\n\t\t\t\t\tclassName: 'ee-ticket-list-cell ee-actions-column ee-rspnsv-table-column-big',\n\t\t\t\t\tvalue: sortingEnabled ? '-' : <TicketActionsMenu entity={ticket} />,\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst exclude = ['row', 'stripe', 'name', 'actions'];\n\n\t\t\tconst cells = pipe(\n\t\t\t\tfilter(filterCellByStartOrEndDate(displayStartOrEndDate)),\n\t\t\t\taddZebraStripesOnMobile(exclude)\n\t\t\t)(cellsData);\n\n\t\t\treturn {\n\t\t\t\tcells,\n\t\t\t\tclassName: `ee-editor-date-list-view-row ${statusClassName}`,\n\t\t\t\tid: `ee-editor-date-list-view-row-${ticket.id}`,\n\t\t\t\tkey: `row-${ticket.id}`,\n\t\t\t\ttype: 'row',\n\t\t\t};\n\t\t},\n\t\t[formatAmount]\n\t); // no deps\n};\n\nexport default useBodyRowGenerator;\n","import { __ } from '@eventespresso/i18n';\nimport * as yup from 'yup';\n\nimport { yupToFinalFormErrors } from '@eventespresso/form';\nimport { BulkEditFormShape } from './types';\n\nexport const validate = async (values: BulkEditFormShape): Promise<any> => {\n\treturn await yupToFinalFormErrors(validationSchema, values);\n};\n\nconst validationSchema = yup.object({\n\tname: yup.string().min(3, () => __('Name must be at least three characters')),\n});\n","import { useMemo, useCallback } from 'react';\nimport { __ } from '@eventespresso/i18n';\nimport { pick } from 'ramda';\n\nimport { CalendarOutlined, ControlOutlined, ProfileOutlined } from '@eventespresso/icons';\nimport { intervalsToOptions, Intervals, DATE_INTERVALS } from '@eventespresso/dates';\nimport type { EspressoFormProps } from '@eventespresso/form';\n\nimport { validate } from './formValidation';\nimport type { BulkEditFormShape } from './types';\nimport { useMemoStringify } from '@eventespresso/hooks';\n\ntype DateFormConfig = EspressoFormProps<BulkEditFormShape>;\n\nconst unitOptions = intervalsToOptions(\n\tpick<Intervals, keyof Intervals>(['months', 'weeks', 'days', 'hours', 'minutes'], DATE_INTERVALS),\n\ttrue\n);\n\nconst useBulkEditFormConfig = (config?: EspressoFormProps<BulkEditFormShape>): DateFormConfig => {\n\tconst { onSubmit } = config;\n\n\tconst onSubmitFrom: DateFormConfig['onSubmit'] = useCallback(\n\t\t(values, form, ...restParams) => {\n\t\t\treturn onSubmit(values, form, ...restParams);\n\t\t},\n\t\t[onSubmit]\n\t);\n\n\tconst adjacentFormItemProps = useMemoStringify({\n\t\tclassName: 'ee-form-item-pair',\n\t});\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...config,\n\t\t\tonSubmit: onSubmitFrom,\n\t\t\tvalidate,\n\t\t\tlayout: 'horizontal',\n\t\t\tdebugFields: ['values', 'errors'],\n\t\t\tsections: [\n\t\t\t\t{\n\t\t\t\t\tname: 'basics',\n\t\t\t\t\ticon: ProfileOutlined,\n\t\t\t\t\ttitle: __('Basics'),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'name',\n\t\t\t\t\t\t\tlabel: __('Name'),\n\t\t\t\t\t\t\tfieldType: 'text',\n\t\t\t\t\t\t\tmin: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'description',\n\t\t\t\t\t\t\tlabel: __('Description'),\n\t\t\t\t\t\t\tfieldType: 'rich-text-editor',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'dates',\n\t\t\t\t\ticon: CalendarOutlined,\n\t\t\t\t\ttitle: __('Dates'),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'shiftDates',\n\t\t\t\t\t\t\tlabel: __('Shift dates'),\n\t\t\t\t\t\t\tfieldType: 'group',\n\t\t\t\t\t\t\tformControlProps: {\n\t\t\t\t\t\t\t\tclassName: 'shift-dates',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsubFields: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'value',\n\t\t\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'unit',\n\t\t\t\t\t\t\t\t\tfieldType: 'select',\n\t\t\t\t\t\t\t\t\toptions: unitOptions,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'type',\n\t\t\t\t\t\t\t\t\tfieldType: 'select',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: __('earlier'),\n\t\t\t\t\t\t\t\t\t\t\tvalue: 'earlier',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: __('later'),\n\t\t\t\t\t\t\t\t\t\t\tvalue: 'later',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'details',\n\t\t\t\t\ticon: ControlOutlined,\n\t\t\t\t\ttitle: __('Details'),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'quantity',\n\t\t\t\t\t\t\tlabel: __('Quantity For Sale'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tparseAsInfinity: true,\n\t\t\t\t\t\t\tmin: -1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'uses',\n\t\t\t\t\t\t\tlabel: __('Number of Uses'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tparseAsInfinity: true,\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'min',\n\t\t\t\t\t\t\tlabel: __('Minimum Quantity'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'max',\n\t\t\t\t\t\t\tlabel: __('Maximum Quantity'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tparseAsInfinity: true,\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tmin: -1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'isRequired',\n\t\t\t\t\t\t\tlabel: __('Required Ticket'),\n\t\t\t\t\t\t\tfieldType: 'switch',\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t}),\n\t\t[adjacentFormItemProps, config, onSubmitFrom]\n\t);\n};\n\nexport default useBulkEditFormConfig;\n","import { useCallback } from 'react';\n\nimport { useBulkEdit } from '@eventespresso/services';\nimport { useTickets, useBulkEditTickets, formToBulkUpdateInput } from '@eventespresso/edtr-services';\n\nimport type { BulkEditFormShape } from './types';\n\ntype Callback = (values: BulkEditFormShape) => void;\n\nconst useSubmitForm = (onClose: VoidFunction): Callback => {\n\tconst { getSelected, unSelectAll } = useBulkEdit();\n\tconst allTickets = useTickets();\n\tconst { updateEntities } = useBulkEditTickets();\n\treturn useCallback<Callback>(\n\t\t(formData) => {\n\t\t\t// pull the shutter down\n\t\t\tonClose();\n\t\t\t// back to basics\n\t\t\tunSelectAll();\n\t\t\t// prepare mutation input from data\n\t\t\tconst input = formToBulkUpdateInput(formData, allTickets, getSelected());\n\t\t\t// do the thing\n\t\t\tupdateEntities(input);\n\t\t},\n\t\t[allTickets, getSelected, onClose, unSelectAll, updateEntities]\n\t);\n};\n\nexport default useSubmitForm;\n","import React from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport { BulkEditDetails } from '@eventespresso/components';\nimport useBulkEditFormConfig from './useBulkEditFormConfig';\nimport useSubmitForm from './useSubmitForm';\n\ntype EditDetailsProps = {\n\tisOpen: boolean;\n\tonClose: VoidFunction;\n};\n\nconst EditDetails: React.FC<EditDetailsProps> = ({ onClose, isOpen }) => {\n\tconst onSubmit = useSubmitForm(onClose);\n\tconst formConfig = useBulkEditFormConfig({ onSubmit });\n\n\treturn (\n\t\t<BulkEditDetails\n\t\t\tformConfig={formConfig}\n\t\t\tisOpen={isOpen}\n\t\t\tonClose={onClose}\n\t\t\ttitle={__('Bulk edit ticket details')}\n\t\t\twarning={__('any changes will be applied to ALL of the selected tickets.')}\n\t\t/>\n\t);\n};\n\nexport default EditDetails;\n","import { useCallback } from 'react';\n\nimport { useBulkEdit } from '@eventespresso/services';\nimport { useBulkDeleteTickets } from '@eventespresso/edtr-services';\n\nimport type { OnDeleteProps } from './types';\n\ntype OnDelete = (props: OnDeleteProps) => VoidFunction;\n\nconst useOnDelete: OnDelete = ({ areTrashedTickets, onClose }) => {\n\tconst { getSelected, unSelectAll } = useBulkEdit();\n\tconst bulkDelete = useBulkDeleteTickets();\n\treturn useCallback<VoidFunction>(() => {\n\t\t// pull the shutter down\n\t\tonClose();\n\t\t// back to basics\n\t\tunSelectAll();\n\n\t\t// goodbye folks :wave:\n\t\tbulkDelete(getSelected(), areTrashedTickets);\n\t}, [areTrashedTickets, bulkDelete, getSelected, onClose, unSelectAll]);\n};\n\nexport default useOnDelete;\n","import React, { useEffect } from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport { useConfirmationDialog } from '@eventespresso/components';\nimport useOnDelete from './useOnDelete';\nimport { OnDeleteProps } from './types';\n\nconst Delete: React.FC<OnDeleteProps> = ({ areTrashedTickets, onClose }) => {\n\tconst onDelete = useOnDelete({ areTrashedTickets, onClose });\n\n\tconst { confirmationDialog, onOpen } = useConfirmationDialog({\n\t\tmessage: areTrashedTickets\n\t\t\t? __('Are you sure you want to permanently delete these tickets? This action can NOT be undone!')\n\t\t\t: __('Are you sure you want to trash these tickets?'),\n\t\ttitle: areTrashedTickets ? __('Delete tickets permanently') : __('Trash tickets'),\n\t\tonConfirm: onDelete,\n\t\tonCancel: onClose,\n\t});\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tuseEffect(() => onOpen(), []);\n\n\treturn <>{confirmationDialog}</>;\n};\n\nexport default Delete;\n","import React, { useCallback } from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport { Button } from '@eventespresso/components';\nimport { Box, Divider } from '@eventespresso/adapters';\nimport { EditMode } from '../types';\n\nexport interface EditModeButtonsProps {\n\tsetEditMode: (editMode: EditMode) => void;\n}\n\nexport const EditModeButtons: React.FC<EditModeButtonsProps> = ({ setEditMode }) => {\n\tconst onClickTogether = useCallback(() => setEditMode('together'), [setEditMode]);\n\tconst onClickSeparate = useCallback(() => setEditMode('separate'), [setEditMode]);\n\treturn (\n\t\t<Box display='flex' alignItems='center' justifyContent='center' height='100%'>\n\t\t\t<Box>\n\t\t\t\t<Button onClick={onClickTogether} buttonText={__('Edit all prices together')} />\n\t\t\t\t<p>{__('Edit all the selected ticket prices dynamically')}</p>\n\t\t\t</Box>\n\t\t\t<Divider orientation='vertical' height='50%' />\n\t\t\t<Box>\n\t\t\t\t<Button onClick={onClickSeparate} buttonText={__('Edit prices individually')} />\n\t\t\t\t<p>{__('Edit prices for each ticket individually')}</p>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n","import React from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport { Button, ButtonRow, ButtonType } from '@eventespresso/components';\n\nexport interface FooterButtonsProps {\n\tonSubmit: VoidFunction;\n\tonReset?: VoidFunction;\n\tonCancel?: VoidFunction;\n}\n\nexport const FooterButtons: React.FC<FooterButtonsProps> = ({ onSubmit, onReset, onCancel }) => {\n\treturn (\n\t\t<ButtonRow align='right' topBordered>\n\t\t\t{onReset && <Button buttonText={__('Reset')} onClick={onReset} type='reset' />}\n\t\t\t{onCancel && <Button buttonText={__('Cancel')} onClick={onCancel} />}\n\t\t\t<Button buttonText={__('Submit')} buttonType={ButtonType.PRIMARY} onClick={onSubmit} type='submit' />\n\t\t</ButtonRow>\n\t);\n};\n","import { useCallback } from 'react';\n\nimport { useTicketMutator, useTicketPrices, useBulkDeletePrices } from '@eventespresso/edtr-services';\nimport { parsedAmount, toBoolean } from '@eventespresso/utils';\nimport { useDataState, useMutatePrices } from '@eventespresso/tpc';\nimport { isNotDefault, getGuids } from '@eventespresso/predicates';\nimport { useBulkEdit } from '@eventespresso/services';\n\nconst useOnSubmitPrices = (onClose: VoidFunction): (() => Promise<void>) => {\n\tconst { prices, ticket } = useDataState();\n\tconst { getSelected } = useBulkEdit();\n\n\tconst { updateEntity: updateTicket } = useTicketMutator();\n\tconst mutatePrices = useMutatePrices();\n\n\t// prices related to all the selected tickets\n\tconst relatedPrices = useTicketPrices(getSelected());\n\n\tconst deletePrices = useBulkDeletePrices();\n\n\t// prices may contain default taxes,\n\t// we need to make sure they are not deleted.\n\tconst nonDefaultPrices = relatedPrices.filter(isNotDefault);\n\n\t// Async to make sure that prices are handled before updating the ticket.\n\treturn useCallback(async () => {\n\t\t// lower down the curtains\n\t\tonClose();\n\t\t// delete all non-default prices\n\t\tawait deletePrices(getGuids(nonDefaultPrices));\n\n\t\t// tickets/prices can be mutated in parallel\n\t\tawait Promise.all(\n\t\t\t// loop through all the selected tickets and update thei price information\n\t\t\tgetSelected().map(async (ticketId) => {\n\t\t\t\t// create/update prices and collect their ids\n\t\t\t\tconst relatedPriceIds = await mutatePrices(prices);\n\n\t\t\t\t// Finally update the ticket and its price relation\n\t\t\t\tawait updateTicket({\n\t\t\t\t\tid: ticketId,\n\t\t\t\t\tprice: parsedAmount(ticket.price || 0),\n\t\t\t\t\treverseCalculate: toBoolean(ticket.reverseCalculate),\n\t\t\t\t\tisTaxable: toBoolean(ticket.isTaxable),\n\t\t\t\t\tprices: relatedPriceIds,\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}, [deletePrices, getSelected, mutatePrices, nonDefaultPrices, onClose, prices, ticket, updateTicket]);\n};\n\nexport default useOnSubmitPrices;\n","import React, { useEffect } from 'react';\n\nimport { TicketPriceCalculator, useAddDefaultPrices, withContext as withTPCContext } from '@eventespresso/tpc';\n\nimport { FooterButtons } from '../buttons';\nimport { EditPricesBaseProps } from '../types';\nimport useOnSubmitPrices from './useOnSubmitPrices';\n\nconst EditTogether: React.FC<EditPricesBaseProps> = ({ onClose }) => {\n\tconst addDefaultPrices = useAddDefaultPrices();\n\t// add default prices on mount\n\tuseEffect(() => {\n\t\taddDefaultPrices();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tconst onSubmit = useOnSubmitPrices(onClose);\n\n\treturn (\n\t\t<>\n\t\t\t<TicketPriceCalculator />\n\t\t\t<FooterButtons onSubmit={onSubmit} onReset={addDefaultPrices} />\n\t\t</>\n\t);\n};\n\nexport default withTPCContext(EditTogether, { ticketId: '' });\n","import React, { useEffect } from 'react';\nimport { __, sprintf } from '@eventespresso/i18n';\n\nimport { TicketPriceCalculator, useDataState } from '@eventespresso/tpc';\nimport { ManageTPCStates } from './useManageTPCStates';\n\nexport interface TPCInstanceProps {\n\tsetTPCState: ManageTPCStates['setTPCState'];\n}\n\nexport const TPCInstance: React.FC<TPCInstanceProps> = ({ setTPCState }) => {\n\tconst { ticket, getData } = useDataState();\n\n\tuseEffect(() => {\n\t\tsetTPCState(getData());\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [getData]);\n\n\treturn (\n\t\t<>\n\t\t\t<header>{sprintf(__('Edit prices for Ticket: %s'), ticket.name)}</header>\n\t\t\t<TicketPriceCalculator />\n\t\t</>\n\t);\n};\n","import { useCallback, useMemo, useRef } from 'react';\n\nimport { DataState } from '@eventespresso/tpc';\nimport { AnyObject } from '@eventespresso/utils';\n\nexport interface ManageTPCStates {\n\tsetTPCState: (dataState: DataState) => void;\n\tgetDataStates: () => AnyObject<DataState>;\n}\n\nexport const useManageTPCStates = (): ManageTPCStates => {\n\t/**\n\t * This contains the data for all TPC instances.\n\t *\n\t * Since this is not used anywhere in the view, rather only used on final submission\n\t * useRef is made for this, to avoid any unnecessary re-renders\n\t */\n\tconst dataStates = useRef<AnyObject<DataState>>({});\n\n\tconst setTPCState = useCallback<ManageTPCStates['setTPCState']>(\n\t\t(dataState) => {\n\t\t\tdataStates.current = { ...dataStates.current, [dataState?.ticket?.id]: dataState };\n\t\t},\n\t\t[dataStates]\n\t);\n\n\tconst getDataStates = useCallback<ManageTPCStates['getDataStates']>(() => dataStates.current, [dataStates]);\n\n\treturn useMemo(() => ({ setTPCState, getDataStates }), [setTPCState, getDataStates]);\n};\n","import { useCallback } from 'react';\n\nimport { useOnSubmitPrices } from '@eventespresso/tpc';\nimport { ManageTPCStates } from './useManageTPCStates';\n\nconst useOnSubmit = (onClose: VoidFunction, getDataStates: ManageTPCStates['getDataStates']): (() => Promise<void>) => {\n\tconst submitPrices = useOnSubmitPrices();\n\n\treturn useCallback(async () => {\n\t\t// lower down the curtains\n\t\tonClose();\n\n\t\t// tickets/prices can be mutated in parallel\n\t\tawait Promise.all(\n\t\t\t// loop through all the selected tickets and update their price information\n\t\t\tObject.values(getDataStates()).map(async (dataState) => {\n\t\t\t\t// Finally update the ticket and its price relation\n\t\t\t\tawait submitPrices(dataState);\n\t\t\t})\n\t\t);\n\t}, [getDataStates, onClose, submitPrices]);\n};\n\nexport default useOnSubmit;\n","import React from 'react';\n\nimport { withContext as withTPCContext } from '@eventespresso/tpc';\nimport { useBulkEdit } from '@eventespresso/services';\n\nimport { EditPricesBaseProps } from '../types';\nimport { TPCInstance } from './TPCInstance';\nimport { FooterButtons } from '../buttons';\nimport { useManageTPCStates } from './useManageTPCStates';\nimport useOnSubmit from './useOnSubmit';\n\nconst EditSeparately: React.FC<EditPricesBaseProps> = ({ onClose }) => {\n\tconst { getSelected } = useBulkEdit();\n\n\tconst { getDataStates, setTPCState } = useManageTPCStates();\n\n\tconst onSubmit = useOnSubmit(onClose, getDataStates);\n\n\tconst ticketIds = getSelected();\n\n\treturn (\n\t\t<>\n\t\t\t{ticketIds.map<React.ReactNode>((ticketId) => {\n\t\t\t\tconst Instance = withTPCContext(TPCInstance, { ticketId });\n\t\t\t\treturn <Instance key={ticketId} setTPCState={setTPCState} />;\n\t\t\t})}\n\t\t\t<FooterButtons onSubmit={onSubmit} onCancel={onClose} />\n\t\t</>\n\t);\n};\n\nexport default EditSeparately;\n","import React, { useState } from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport { EntityEditModal } from '@eventespresso/components';\nimport { EditModeButtons } from './buttons';\nimport { EditMode, EditPricesBaseProps } from './types';\nimport { EditTogether } from './editTogether';\nimport { EditSeparately } from './editSeparately';\n\nconst EditPrices: React.FC<EditPricesBaseProps> = ({ onClose, isOpen }) => {\n\tconst [editMode, setEditMode] = useState<EditMode>();\n\n\treturn (\n\t\t<EntityEditModal\n\t\t\tisOpen={isOpen}\n\t\t\tonClose={onClose}\n\t\t\tcloseOnOverlayClick={true}\n\t\t\ttitle={__('Bulk edit ticket prices')}\n\t\t>\n\t\t\t{!editMode && <EditModeButtons setEditMode={setEditMode} />}\n\t\t\t{editMode === 'together' && <EditTogether onClose={onClose} />}\n\t\t\t{editMode === 'separate' && <EditSeparately onClose={onClose} />}\n\t\t</EntityEditModal>\n\t);\n};\n\nexport default EditPrices;\n","import React, { useState, useCallback } from 'react';\nimport { __ } from '@eventespresso/i18n';\nimport { useDisclosure } from '@chakra-ui/hooks';\n\nimport { BulkActions } from '@eventespresso/components';\nimport { useMemoStringify } from '@eventespresso/hooks';\nimport { useTicketsListFilterState, TicketsStatus } from '@edtrServices/filterState';\n\nimport Checkbox from '../../tableView/Checkbox';\nimport { EditDetails } from '../details';\nimport { Delete } from '../delete';\nimport { EditPrices } from '../prices';\n\nimport type { BulkActionsProps } from '@eventespresso/components';\n\ntype Action = 'edit-details' | 'delete' | 'edit-prices' | '';\n\nconst Actions: React.FC = () => {\n\tconst [action, setAction] = useState<Action>('');\n\n\tconst { isOpen, onOpen, onClose } = useDisclosure();\n\tconst { status } = useTicketsListFilterState();\n\n\tconst areTrashedTickets = status === TicketsStatus.trashedOnly;\n\n\tconst options = useMemoStringify([\n\t\t{\n\t\t\tvalue: '',\n\t\t\tlabel: __('bulk actions'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'edit-details',\n\t\t\tlabel: __('edit ticket details'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'delete',\n\t\t\tlabel: areTrashedTickets ? __('delete tickets') : __('trash tickets'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'edit-prices',\n\t\t\tlabel: __('edit ticket prices'),\n\t\t},\n\t]);\n\n\tconst onApply = useCallback<BulkActionsProps<Action>['onApply']>(\n\t\t(action) => {\n\t\t\tsetAction(action);\n\t\t\tonOpen();\n\t\t},\n\t\t[onOpen]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<BulkActions Checkbox={Checkbox} options={options} onApply={onApply} defaultAction='' />\n\t\t\t{isOpen && (\n\t\t\t\t<>\n\t\t\t\t\t{action === 'edit-details' && <EditDetails isOpen={true} onClose={onClose} />}\n\t\t\t\t\t{action === 'delete' && <Delete areTrashedTickets={areTrashedTickets} onClose={onClose} />}\n\t\t\t\t\t{action === 'edit-prices' && <EditPrices isOpen={true} onClose={onClose} />}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Actions;\n","import React from 'react';\nimport { __ } from '@eventespresso/i18n';\n\nimport { EntityTable } from '@eventespresso/components';\nimport useHeaderRowGenerator from './useHeaderRowGenerator';\nimport useBodyRowGenerator from './useBodyRowGenerator';\nimport { useFilteredTickets, useTicketsListFilterState } from '@edtrServices/filterState';\nimport { useReorderTickets } from '@eventespresso/edtr-services';\nimport { checkFeatureFlag } from '@eventespresso/config';\nimport { withBulkEdit } from '@eventespresso/services';\nimport { Actions } from '../bulkEdit';\n\nconst isBulkEditEnabled = checkFeatureFlag('bulkEdit');\n/**\n * Displays tickets in a standard list table like view\n */\nconst TableView: React.FC = () => {\n\tconst filterState = useTicketsListFilterState();\n\tconst filteredEntities = useFilteredTickets();\n\n\tconst { sortResponder: sortTickets } = useReorderTickets(filteredEntities);\n\n\tconst bodyRowGenerator = useBodyRowGenerator();\n\tconst headerRowGenerator = useHeaderRowGenerator();\n\n\treturn (\n\t\t<>\n\t\t\t{isBulkEditEnabled && <Actions />}\n\t\t\t<EntityTable\n\t\t\t\tentities={filteredEntities}\n\t\t\t\tfilterState={filterState}\n\t\t\t\tbodyRowGenerator={bodyRowGenerator}\n\t\t\t\theaderRowGenerator={headerRowGenerator}\n\t\t\t\tclassName={'ee-tickets-list-list-view ee-fade-in'}\n\t\t\t\ttableId='ticket-entities-table-view'\n\t\t\t\ttableCaption={__('Tickets')}\n\t\t\t\tonSort={sortTickets}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default withBulkEdit(TableView);\n"],"sourceRoot":""}