(this.webpackJsonproot=this.webpackJsonproot||[]).push([[22],{3043:function(t,e,i){"use strict";var a=i(5),n=i(8),c=i(12),s=i(0);e.a=function(t){var e=t.ticket,i=Object(c.useRegistrationsLink)({ticket_id:e.dbId}),r=Object(a.__)("total registrations."),o=Object(a.__)("view ALL registrations for this ticket.");return Object(s.jsx)(n.ItemCount,{count:e.registrationCount,emphasizeZero:!1,title:r,children:Object(s.jsx)(n.RegistrationsLink,{href:i,tooltip:o})})}},3044:function(t,e,i){"use strict";var a=i(1),n=i(5),c=i(17),s=i(8),r=i(12),o=i(0);e.a=function(t){var e=t.entity,i=Object(r.useTicketMutator)(e.id).updateEntity,u=Object(a.useCallback)((function(t){var a=Object(c.parseInfinity)(t);a!==e.quantity&&i({quantity:a})}),[e.quantity,i]);return Object(o.jsx)(s.InlineEditInfinity,{onChange:u,value:"".concat(e.quantity),tooltip:Object(n.__)("edit quantity of tickets available\u2026")})}},3045:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return m}));var a=i(1),n=i(5),c=i(12),s=i(8),r=i(0),o=function(t){var e=t.className,i=t.entity,o=t.view,u=void 0===o?"card":o,l=Object(c.useTicketMutator)(i.id).updateEntity,d="card"===u&&2,b=Object(a.useCallback)((function(t){t!==i.name&&l({name:t})}),[i.name,l]),j=Object(n.__)("edit title\u2026"),O=i.name||j;return Object(r.jsx)(s.InlineEditText,{className:e,lineCount:d,onChange:b,tag:"table"===u?"div":"h4",tooltip:j,value:O})},u=i(26),l=i(82),d=i(22),b=i(21),j=i(11),O=i(118),y=i(46),v=i(2),p=function(t){var e=Object(c.useLazyTicket)(),i=Object(O.useInitialState)({ticketId:t,getTicket:e}),n=Object(O.useDefaultBasePrice)(),s=Object(O.useMutatePrices)(),r=Object(c.useTicketMutator)(t).updateEntity;return Object(a.useCallback)((function(t){var e,a,c=i(null),o=Object(v.a)(Object(v.a)({},null===(e=c)||void 0===e?void 0:e.ticket),{},{price:t});if(c=Object(v.a)(Object(v.a)({},c),{},{ticket:o}),!Object(j.getBasePrice)(null===(a=c)||void 0===a?void 0:a.prices)){var u,l=[Object(v.a)(Object(v.a)({},n),{},{order:1,isNew:!0})].concat(Object(y.a)(null===(u=c)||void 0===u?void 0:u.prices));c=Object(v.a)(Object(v.a)({},c),{},{prices:l})}var d=Object(O.calculateBasePrice)(c);s(d).then((function(e){r({price:t,reverseCalculate:!0,prices:e})}))}),[n,i,s,r])},m=function(t){var e=t.entity,i=t.className,c=Object(b.useMoneyDisplay)(),o=c.afterAmount,y=c.beforeAmount,v=c.formatAmount,m=p(e.id),f=Object(a.useCallback)((function(t){var i=t.amount,a=parseFloat(i);a!==e.price&&m(a)}),[m,e.price]),k=Object(O.useLockedTicketAction)(e,"COPY/TRASH"),_=k.alertContainer,x=k.showAlert,C=Object(d.useMemoStringify)({className:i}),g=Object(j.isLocked)(e),I=Object(n.__)("edit ticket total\u2026");return g?Object(r.jsxs)(u.Clickable,{as:"div",onClick:x,children:[Object(r.jsx)(l.CurrencyDisplay,{className:i,value:e.price}),_]}):Object(r.jsx)(s.InlineEditCurrency,{afterAmount:o,amount:e.price,beforeAmount:y,formatAmount:v,id:e.id,placeholder:Object(n.__)("set price\u2026"),wrapperProps:C,onChange:f,tag:"h3",tooltip:I})}},3048:function(t,e,i){"use strict";var a=i(2),n=i(7),c=i(8),s=i(576),r=function(t){return Object(s.b)("ticket",t)},o=i(0);e.a=function(t){var e=t.entity,i=Object(n.a)(t,["entity"]),s=r(e);return Object(o.jsx)(c.EntityActionsMenu,Object(a.a)(Object(a.a)({},i),{},{menuItems:s}))}},3052:function(t,e,i){"use strict";i.r(e);var a=i(8),n=i(12),c=i(565),s=i(1),r=i(5),o=i(30),u=i(82),l=i(21),d=i(3045),b=i(3043),j=i(3044),O=i(0),y=function(t){var e=t.adminUrl,i=t.entity,n=t.eventId,c=Object(s.useMemo)((function(){return[{id:"ee-ticket-sold",label:Object(r.__)("sold"),value:Object(O.jsx)(a.EntityDetailsPanelSold,{adminUrl:e,dbId:i.dbId,eventId:n,sold:i.sold,type:"ticket"})},{id:"ee-ticket-qty",label:Object(r.__)("quantity"),value:Object(O.jsx)(j.a,{entity:i})},{id:"ee-ticket-registrations",label:Object(r.__)("reg list"),value:Object(O.jsx)(b.a,{ticket:i})}]}),[e,n,i]);return Object(O.jsx)(a.EntityDetailsPanel,{details:c,className:"ee-editor-ticket-details-sold-rsrvd-qty-div"})},v=function(t){var e=t.entity,i=Object(l.useConfig)().siteUrl,a=Object(s.useMemo)((function(){return Object(n.getAdminUrl)({adminSiteUrl:i.admin,page:o.ADMIN_ROUTES.REGISTRATIONS})}),[i.admin]),c=Object(n.useEventId)(),b=Object(n.useTicketMutator)(e.id).updateEntity,j=Object(s.useCallback)((function(t){b({description:t})}),[b]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(d.a,{className:"entity-card-details__name",entity:e}),Object(O.jsx)(u.SimpleTextEditorModal,{className:"entity-card-details__text",onUpdate:j,text:e.description,title:Object(r.__)("Edit description"),tooltip:Object(r.__)("edit description\u2026")}),Object(O.jsx)(d.b,{className:"entity-card-details__price",entity:e}),Object(O.jsx)(y,{adminUrl:a,entity:e,eventId:c})]})},p=i(13),m=function(t){var e=t.entity,i=Object(n.useTicketsListFilterState)().displayStartOrEndDate,a=Object(n.useTicketMutator)(e.id).updateEntity,o=Object(l.useTimeZoneTime)().siteTimeToUtc,d=Object(s.useCallback)((function(t){var e=Object(p.a)(t,2),i=e[0],n=e[1],c=o(i).toISOString(),s=o(n).toISOString();a({startDate:c,endDate:s})}),[o,a]),b=Object(c.getTicketStatusTextLabel)(e);return e?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.CalendarDateSwitcher,{displayDate:i,endDate:e.endDate,startDate:e.startDate}),Object(O.jsx)(u.EditDateRangeButton,{endDate:e.endDate,header:Object(r.__)("Edit Ticket Sale Dates"),onChange:d,popoverPlacement:"left-end",startDate:e.startDate,tooltip:Object(r.__)("edit ticket sales start and end dates")}),Object(O.jsx)("div",{className:"ee-ticket-status-label",children:b})]}):null},f=i(3048),k=function(t){var e=t.id,i=Object(n.useTicketItem)({id:e}),s=Object(c.ticketStatusBgColorClassName)(i);return i?Object(O.jsx)(a.EntityCard,{actionsMenu:Object(O.jsx)(f.a,{entity:i,layout:a.EntityActionsMenuLayout.Vertical}),details:Object(O.jsx)(v,{entity:i}),entity:i,reverse:!0,sidebar:Object(O.jsx)(m,{entity:i}),sidebarClass:s}):null};e.default=function(){var t=Object(n.useFilteredTicketIds)();return Object(O.jsx)(a.EntityCardList,{EntityCard:k,entityIds:t})}}}]);
//# sourceMappingURL=tickets-card-view.f04b979a.chunk.js.map