(this.webpackJsonproot=this.webpackJsonproot||[]).push([[6],{3001:function(e,t,a){"use strict";var n=a(0),i=a(5),s=a(10),c=a(13),r={placement:"top"};t.a=function(e){var t=e.datetime,a=Object(c.useRegistrationsLink)({datetime_id:t.dbId}),l=Object(i.__)("view ALL registrations for this date.");return Object(n.jsx)(s.RegistrationsLink,{href:a,tooltip:l,tooltipProps:r})}},3002:function(e,t,a){"use strict";var n=a(0),i=a(1),s=a(5),c=a(19),r=a(10),l=a(13);t.a=function(e){var t=e.entity,a=Object(l.useDatetimeMutator)(t.id).updateEntity,o=Object(l.useUpdateRelatedTickets)(t.id),u=Object(l.useTicketQuantityForCapacity)(),b=Object(i.useCallback)((function(e){var n=Object(c.parseInfinity)(e);if(n!==t.capacity){a({capacity:n});var i=u(n);o(i)}}),[t.capacity,a,u,o]);return Object(n.jsx)(r.InlineEditInfinity,{onChange:b,tooltip:Object(s.__)("edit capacity (registration limit)\u2026"),value:"".concat(t.capacity)})}},3006:function(e,t,a){"use strict";var n=a(3),i=a(0),s=a(8),c=a(10),r=a(1108),l=function(e){return Object(r.a)("datetime",e)};t.a=function(e){var t=e.entity,a=Object(s.a)(e,["entity"]),r=l(t);return Object(i.jsx)(c.EntityActionsMenu,Object(n.a)(Object(n.a)({},a),{},{menuItems:r}))}},3007:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a(1),s=a(5),c=a(13),r=a(10),l=function(e){var t=e.className,a=e.entity,l=e.view,o=void 0===l?"card":l,u=Object(c.useDatetimeMutator)(a.id).updateEntity,b=Object(s.__)("edit title\u2026"),d=a.name||b,j="card"===o&&2,O=Object(i.useCallback)((function(e){e!==a.name&&u({name:e})}),[a.name,u]);return Object(n.jsx)(r.InlineEditText,{className:t,lineCount:j,onChange:O,tag:"table"===o?"div":"h4",tooltip:b,value:d})}},3010:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(5),s=a(186),c=a(15),r=a(1),l=a(13),o=a(3),u=a(23),b=Object(u.withFeature)("use_bulk_edit")((function(e){var t=Object(l.useVisibleDatetimeIds)(),a=Object(c.a)(t,1)[0];return Object(n.jsx)(s.ActionCheckbox,Object(o.a)(Object(o.a)({},e),{},{visibleEntityIds:a}))})),d=function(){var e=Object(l.useShowDatetimeBA)(),t=Object(c.a)(e,1)[0],a=Object(r.useMemo)((function(){return{className:"ee-entity-list-status-stripe",key:"stripe",size:"nano",textAlign:"center",value:""}}),[]),s=Object(r.useMemo)((function(){return t&&{key:"checkbox",size:"micro",textAlign:"center",value:Object(n.jsx)("div",{className:"ee-rspnsv-table-hide-on-mobile",children:Object(n.jsx)(b,{})})}}),[t]),o=Object(r.useMemo)((function(){return{key:"id",size:"micro",textAlign:"end",value:Object(i.__)("ID")}}),[]),u=Object(r.useMemo)((function(){return{key:"name",size:"huge",value:Object(i.__)("Name")}}),[]),d=Object(r.useMemo)((function(){return{key:"start",size:"default",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Start Date")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Start")})]})}}),[]),j=Object(r.useMemo)((function(){return{key:"end",size:"default",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("End Date")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("End")})]})}}),[]),O=Object(r.useMemo)((function(){return{className:"ee-col__inline-edit",key:"capacity",size:"tiny",textAlign:"end",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Capacity")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Cap")})]})}}),[]),m=Object(r.useMemo)((function(){return{key:"sold",size:"tiny",textAlign:"end",value:Object(i.__)("Sold")}}),[]),p=Object(r.useMemo)((function(){return{key:"registrations",size:"smaller",textAlign:"center",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Reg list")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Regs")})]})}}),[]),f=Object(r.useMemo)((function(){return{key:"actions",size:"big",textAlign:"center",value:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(i.__)("Actions")}),Object(n.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(i.__)("Actions")})]})}}),[]);return Object(r.useCallback)((function(e){var t=null===e||void 0===e?void 0:e.displayStartOrEndDate;return{cells:[a,s,o,u,d,j,O,m,p,f].filter(Boolean).filter(Object(l.filterCellByStartOrEndDate)(t)),className:"ee-editor-date-list-items-header-row",key:"dates-list-header",primary:!0,type:"row"}}),[f,O,s,j,o,u,p,m,d,a])},j=a(11),O=a.n(j),m=a(24),p=a(222),f=a.n(p),y=a(545),v=a.n(y),_=a(10),h=a(33),x=a(550),g=a(19),k=a(3001),D=a(3006),A=a(3002),C=a(3007),E=Object(_.addZebraStripesOnMobile)(["row","stripe","name","actions"]),w=function(){var e=Object(l.useLazyDatetime)(),t=Object(l.useShowDatetimeBA)(),a=Object(c.a)(t,1)[0];return Object(r.useCallback)((function(t){var i=t.entityId,s=t.filterState,c=e(i),r=s.displayStartOrEndDate,o=s.sortingEnabled,u=Object(x.getDatetimeBackgroundColorClassName)(c),d=c.dbId||Object(g.shortenGuid)(c.id),j=Object(x.datetimeStatus)(c),p=[{className:O()("ee-entity-list-status-stripe",u),key:"stripe",showValueOnMobile:!0,textAlign:"center",value:c.name},a&&{key:"cell",size:"micro",textAlign:"center",value:Object(n.jsx)(b,{dbId:c.dbId,id:c.id})},{key:"id",size:"micro",textAlign:"end",value:d},{className:"ee-col-name ee-rspnsv-table-hide-on-mobile",key:"name",size:"huge",value:o?c.name:Object(n.jsx)(C.a,{className:"ee-entity-list-text ee-focus-priority-5",entity:c,view:"table"})},{key:"start",size:"default",value:Object(m.format)(new Date(c.startDate),h.ENTITY_LIST_DATE_TIME_FORMAT)},{key:"end",size:"default",value:Object(m.format)(new Date(c.endDate),h.ENTITY_LIST_DATE_TIME_FORMAT)},{className:"ee-col__inline-edit",key:"capacity",size:"tiny",textAlign:"end",value:o?c.capacity:Object(n.jsx)(A.a,{entity:c})},{key:"sold",size:"tiny",textAlign:"end",value:c.sold||0},{key:"registrations",size:"smaller",textAlign:"center",value:o?"-":Object(n.jsx)(k.a,{datetime:c})},{key:"actions",size:"big",textAlign:"center",value:o?"-":Object(n.jsx)(D.a,{entity:c})}].filter(Boolean),y=f()(Object(l.filterCellByStartOrEndDate)(r));return{cells:v()(y,E)(p),className:j,id:"ee-editor-date-list-view-row-".concat(c.id),key:"row-".concat(c.id),type:"row"}}),[e,a])},T=a(22),S=a(12),N=a(683),I=a.n(N),M=a(2998),z=a(2931),F=a(2999),B=a(58),L=a(66),R=a.n(L),G=a(93),P=a(434),V=a(196),J=function(){var e=Object(G.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.yupToFinalFormErrors)(U,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=P.object({name:P.string().min(3,(function(){return Object(i.__)("Name must be at least three characters")}))}),Y=Object(B.intervalsToOptions)(I()(["months","weeks","days","hours","minutes"],B.DATE_INTERVALS),!0),q=function(e){var t=e.onSubmit,a=Object(r.useCallback)((function(e,a){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return t.apply(void 0,[e,a].concat(i))}),[t]),n=Object(T.useMemoStringify)({className:"ee-form-item-pair"});return Object(r.useMemo)((function(){return Object(o.a)(Object(o.a)({},e),{},{onSubmit:a,validate:J,layout:"horizontal",debugFields:["values","errors"],sections:[{name:"basics",icon:M.a,title:Object(i.__)("Basics"),fields:[{name:"name",label:Object(i.__)("Name"),fieldType:"text",min:3},{name:"description",label:Object(i.__)("Description"),fieldType:"simple-text-editor"}]},{name:"dates",icon:z.a,title:Object(i.__)("Dates"),fields:[{name:"shiftDates",label:Object(i.__)("Shift dates"),fieldType:"group",formControlProps:{className:"shift-dates"},subFields:[{name:"value",fieldType:"number",min:1},{name:"unit",fieldType:"select",options:Y},{name:"type",fieldType:"select",options:[{label:"",value:""},{label:Object(i.__)("earlier"),value:"earlier"},{label:Object(i.__)("later"),value:"later"}]}]}]},{name:"details",icon:F.a,title:Object(i.__)("Details"),fields:[{name:"capacity",label:Object(i.__)("Capacity"),fieldType:"number",parseAsInfinity:!0,min:-1,formControlProps:n}]}]})}),[n,e,a])},Q=function(e){var t=Object(u.useBulkEdit)(),a=t.getSelected,n=t.unSelectAll,i=Object(l.useDatetimes)(),s=Object(l.useBulkEditDatetimes)().updateEntities;return Object(r.useCallback)((function(t){e(),n();var c=Object(l.formToBulkUpdateInput)(t,i,a());s(c)}),[i,a,e,n,s])},Z=function(e){var t=e.onClose,a=e.isOpen,c=Q(t),r=q({onSubmit:c});return Object(n.jsx)(s.BulkEditDetails,{formConfig:r,isOpen:a,onClose:t,title:Object(i.__)("Bulk edit date details"),warning:Object(i.__)("any changes will be applied to ALL of the selected dates.")})},H=function(e){var t=e.areTrashedDates,a=e.onClose,n=Object(u.useBulkEdit)(),i=n.getSelected,s=n.unSelectAll,c=Object(l.useBulkDeleteDatetimes)();return Object(r.useCallback)((function(){a(),s(),c(i(),t)}),[t,c,i,a,s])},K=function(e){var t=e.areTrashedDates,a=e.onClose,s=H({areTrashedDates:t,onClose:a}),c=Object(_.useConfirmationDialog)({message:t?Object(i.__)("Are you sure you want to permanently delete these datetimes? This action can NOT be undone!"):Object(i.__)("Are you sure you want to trash these datetimes?"),title:t?Object(i.__)("Delete datetimes permanently"):Object(i.__)("Trash datetimes"),onConfirm:s,onCancel:a}),l=c.confirmationDialog,o=c.onOpen;return Object(r.useEffect)((function(){return o()}),[]),Object(n.jsx)(n.Fragment,{children:l})},W=["edit-details","delete",""],X=Object(u.withFeature)("use_bulk_edit")((function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),a=t[0],o=t[1],d=Object(u.useBulkEdit)(),j=Object(l.useShowDatetimeBA)(),O=Object(c.a)(j,1)[0],m=Object(T.useDisclosure)(),p=m.isOpen,f=m.onOpen,y=m.onClose,v=Object(l.useDatesListFilterState)().status===S.DatetimeStatus.trashedOnly,h=Object(T.useMemoStringify)(l.hooks.applyFilters("eventEditor.datetimes.bulkEdit.actions",[{value:"",label:Object(i.__)("bulk actions")},{value:"edit-details",label:Object(i.__)("edit datetime details")},{value:"delete",label:v?Object(i.__)("delete datetimes"):Object(i.__)("trash datetimes")}])),x=Object(r.useCallback)((function(e){o(e),W.includes(e)&&f(),l.hooks.doAction("eventEditor.datetimes.bulkEdit.apply",e,d)}),[d,f]);return Object(n.jsxs)(_.Collapsible,{show:O,children:[Object(n.jsx)(s.BulkActions,{Checkbox:b,defaultAction:"",id:"ee-bulk-edit-dates-actions",onApply:x,options:h}),p&&Object(n.jsxs)(n.Fragment,{children:["edit-details"===a&&Object(n.jsx)(Z,{isOpen:!0,onClose:y}),"delete"===a&&Object(n.jsx)(K,{areTrashedDates:v,onClose:y})]})]})}));t.default=Object(u.withBulkEdit)((function(){var e=Object(l.useDatesListFilterState)(),t=Object(l.useFilteredDateIds)(),a=Object(l.useReorderDatetimes)(t).sortResponder,c=w(),r=d();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X,{}),Object(n.jsx)(s.EntityTable,{bodyRowGenerator:c,domain:l.domain,entityIds:t,filterState:e,headerRowGenerator:r,listId:l.datesList,onSort:a,tableCaption:Object(i.__)("Event Dates"),tableId:"date-entities-table-view"})]})}))},395:function(e,t,a){var n=a(51)(a(119));e.exports=n},545:function(e,t,a){var n=a(96),i=a(826),s=a(395),c=a(827);e.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return n(arguments[0].length,s(i,arguments[0],c(arguments)))}},597:function(e,t,a){var n=a(72);e.exports=function(e,t){return function(){var a=arguments.length;if(0===a)return t();var i=arguments[a-1];return n(i)||"function"!==typeof i[e]?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,a-1))}}},826:function(e,t){e.exports=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}}},827:function(e,t,a){var n=a(597),i=a(29)(n("tail",a(828)(1,1/0)));e.exports=i},828:function(e,t,a){var n=a(597),i=a(51)(n("slice",(function(e,t,a){return Array.prototype.slice.call(a,e,t)})));e.exports=i}}]);
//# sourceMappingURL=dates-table-view.06e4163e.chunk.js.map