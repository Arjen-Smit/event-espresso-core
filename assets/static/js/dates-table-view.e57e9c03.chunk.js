(this.webpackJsonproot=this.webpackJsonproot||[]).push([[6],{2901:function(e,t,a){"use strict";var l=a(0),s=(a(1),a(5)),n=a(10),c=a(14),i={placement:"top"};t.a=function(e){var t=e.datetime,a=Object(c.useRegistrationsLink)({datetime_id:t.dbId}),r=Object(s.__)("view ALL registrations for this date.");return Object(l.jsx)(n.RegistrationsLink,{href:a,tooltip:r,tooltipProps:i})}},2902:function(e,t,a){"use strict";var l=a(0),s=a(1),n=a(5),c=a(21),i=a(10),r=a(14);t.a=function(e){var t=e.entity,a=Object(r.useDatetimeMutator)(t.id).updateEntity,o=Object(r.useUpdateRelatedTickets)(t.id),u=Object(r.useTicketQuantityForCapacity)(),b=Object(s.useCallback)((function(e){var l=Object(c.parseInfinity)(e);if(l!==t.capacity){a({capacity:l});var s=u(l);o(s)}}),[t.capacity,a,u,o]);return Object(l.jsx)(i.InlineEditInfinity,{onChange:b,tooltip:Object(n.__)("edit capacity (registration limit)\u2026"),value:"".concat(t.capacity)})}},2906:function(e,t,a){"use strict";var l=a(3),s=a(0),n=a(8),c=(a(1),a(10)),i=a(566),r=function(e){return Object(i.b)("datetime",e)};t.a=function(e){var t=e.entity,a=Object(n.a)(e,["entity"]),i=r(t);return Object(s.jsx)(c.EntityActionsMenu,Object(l.a)(Object(l.a)({},a),{},{menuItems:i}))}},2907:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var l=a(0),s=a(1),n=a(5),c=a(14),i=a(10),r=function(e){var t=e.className,a=e.entity,r=e.view,o=void 0===r?"card":r,u=Object(c.useDatetimeMutator)(a.id).updateEntity,b=Object(n.__)("edit title\u2026"),d=a.name||b,m="card"===o&&2,j=Object(s.useCallback)((function(e){e!==a.name&&u({name:e})}),[a.name,u]);return Object(l.jsx)(i.InlineEditText,{className:t,lineCount:m,onChange:j,tag:"table"===o?"div":"h4",tooltip:b,value:d})}},2910:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a(1),n=a(5),c=a(186),i=a(14),r=a(3),o=a(23),u=a(24),b=Object(u.withFeature)("use_bulk_edit")((function(e){var t=Object(i.useVisibleDatetimeIds)(),a=Object(o.a)(t,1)[0];return Object(l.jsx)(c.ActionCheckbox,Object(r.a)(Object(r.a)({},e),{},{visibleEntityIds:a}))})),d=function(){return Object(s.useCallback)((function(e){var t=e.displayStartOrEndDate;return{cells:[{key:"stripe",type:"cell",className:"ee-date-list-col-hdr ee-entity-list-status-stripe ee-rspnsv-table-column-nano",value:""},{key:"checkbox",type:"cell",className:"ee-date-list-col-hdr ee-date-list-col-checkbox ee-rspnsv-table-column-micro",value:Object(l.jsx)("div",{className:"ee-rspnsv-table-hide-on-mobile",children:Object(l.jsx)(b,{})})},{key:"id",type:"cell",className:"ee-date-list-col-hdr ee-date-list-col-id ee-number-column ee-rspnsv-table-column-nano",value:Object(n.__)("ID")},{key:"name",type:"cell",className:"ee-date-list-col-hdr ee-date-list-col-name ee-rspnsv-table-column-huge",value:Object(n.__)("Name")},{key:"start",type:"cell",className:"ee-date-list-col-hdr ee-rspnsv-table-column-default",value:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(n.__)("Start Date")}),Object(l.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(n.__)("Start")})]})},{key:"end",type:"cell",className:"ee-date-list-col-hdr ee-rspnsv-table-column-default",value:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(n.__)("End Date")}),Object(l.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(n.__)("End")})]})},{key:"capacity",type:"cell",className:"ee-date-list-col-hdr ee-date-list-col-capacity ee-rspnsv-table-column-tiny ee-number-column",value:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(n.__)("Capacity")}),Object(l.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(n.__)("Cap")})]})},{key:"sold",type:"cell",className:"ee-date-list-col-hdr ee-date-list-col-sold ee-rspnsv-table-column-tiny ee-number-column",value:Object(n.__)("Sold")},{key:"registrations",type:"cell",className:"ee-date-list-col-hdr ee-date-list-col-registrations ee-rspnsv-table-column-smaller ee-centered-column",value:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(n.__)("Reg list")}),Object(l.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(n.__)("Regs")})]})},{key:"actions",type:"cell",className:"ee-date-list-col-hdr ee-actions-column ee-rspnsv-table-column-big ee-centered-column",value:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"ee-rspnsv-table-long-label",children:Object(n.__)("Actions")}),Object(l.jsx)("span",{className:"ee-rspnsv-table-short-label",children:Object(n.__)("Actions")})]})}].filter(Object(i.filterCellByStartOrEndDate)(t)),className:"ee-editor-date-list-items-header-row",key:"dates-list-header",primary:!0,type:"row"}}),[])},m=a(25),j=a(273),p=a.n(j),O=a(559),y=a.n(O),v=a(10),f=a(33),h=a(565),_=a(21),k=a(2901),x=a(2906),g=a(2902),N=a(2907),D=Object(v.addZebraStripesOnMobile)(["row","stripe","name","actions"]),C=function(){var e=Object(i.useLazyDatetime)();return Object(s.useCallback)((function(t){var a=t.entityId,s=t.filterState,n=e(a),c=s.displayStartOrEndDate,r=s.sortingEnabled,o=Object(h.getDatetimeBackgroundColorClassName)(n),u=n.dbId||Object(_.shortenGuid)(n.id),d=Object(h.datetimeStatus)(n),j={key:"capacity",type:"cell",className:"ee-date-list-cell ee-date-list-col-capacity ee-rspnsv-table-column-tiny ee-number-column ee-col-5",value:r?n.capacity:Object(l.jsx)(g.a,{entity:n})},O={key:"name",type:"cell",className:"ee-date-list-cell ee-date-list-col-name ee-col-name ee-rspnsv-table-column-bigger ee-rspnsv-table-hide-on-mobile",value:r?n.name:Object(l.jsx)(N.a,{className:"ee-entity-list-text ee-focus-priority-5",entity:n,view:"table"})},v=[{key:"stripe",type:"cell",className:"ee-date-list-cell ee-entity-list-status-stripe ".concat(o," ee-rspnsv-table-column-nano"),value:Object(l.jsx)("div",{className:"ee-rspnsv-table-show-on-mobile",children:n.name})},{key:"checkbox",type:"cell",className:"ee-date-list-cell ee-date-list-col-checkbox ee-rspnsv-table-column-micro",value:Object(l.jsx)(b,{dbId:n.dbId,id:n.id})},{key:"id",type:"cell",className:"ee-date-list-cell ee-date-list-col-id ee-rspnsv-table-column-nano ee-number-column",value:u},O,{key:"start",type:"cell",className:"ee-date-list-cell ee-rspnsv-table-column-default",value:Object(m.format)(new Date(n.startDate),f.ENTITY_LIST_DATE_TIME_FORMAT)},{key:"end",type:"cell",className:"ee-date-list-cell ee-rspnsv-table-column-default",value:Object(m.format)(new Date(n.endDate),f.ENTITY_LIST_DATE_TIME_FORMAT)},j,{key:"sold",type:"cell",className:"ee-date-list-cell ee-date-list-col-sold ee-rspnsv-table-column-tiny ee-number-column",value:n.sold||0},{key:"registrations",type:"cell",className:"ee-date-list-cell ee-date-list-col-registrations ee-rspnsv-table-column-smaller ee-centered-column",value:r?"-":Object(l.jsx)(k.a,{datetime:n})},{key:"actions",type:"cell",className:"ee-date-list-cell ee-date-list-col-actions ee-actions-column ee-rspnsv-table-column-big",value:r?"-":Object(l.jsx)(x.a,{entity:n})}],C=p()(Object(i.filterCellByStartOrEndDate)(c));return{cells:y()(C,D)(v),className:"ee-editor-date-list-view-row ".concat(d),id:"ee-editor-date-list-view-row-".concat(n.id),key:"row-".concat(n.id),type:"row"}}),[e])},T=a(26),w=a(12),E=a(751),S=a.n(E),I=a(2898),A=a(2832),F=a(2899),B=a(61),L=a(67),R=a.n(L),M=a(97),G=a(434),P=a(197),z=function(){var e=Object(M.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.yupToFinalFormErrors)(J,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=G.object({name:G.string().min(3,(function(){return Object(n.__)("Name must be at least three characters")}))}),U=Object(B.intervalsToOptions)(S()(["months","weeks","days","hours","minutes"],B.DATE_INTERVALS),!0),V=function(e){var t=e.onSubmit,a=Object(s.useCallback)((function(e,a){for(var l=arguments.length,s=new Array(l>2?l-2:0),n=2;n<l;n++)s[n-2]=arguments[n];return t.apply(void 0,[e,a].concat(s))}),[t]),l=Object(T.useMemoStringify)({className:"ee-form-item-pair"});return Object(s.useMemo)((function(){return Object(r.a)(Object(r.a)({},e),{},{onSubmit:a,validate:z,layout:"horizontal",debugFields:["values","errors"],sections:[{name:"basics",icon:I.a,title:Object(n.__)("Basics"),fields:[{name:"name",label:Object(n.__)("Name"),fieldType:"text",min:3},{name:"description",label:Object(n.__)("Description"),fieldType:"simple-text-editor"}]},{name:"dates",icon:A.a,title:Object(n.__)("Dates"),fields:[{name:"shiftDates",label:Object(n.__)("Shift dates"),fieldType:"group",formControlProps:{className:"shift-dates"},subFields:[{name:"value",fieldType:"number",min:1},{name:"unit",fieldType:"select",options:U},{name:"type",fieldType:"select",options:[{label:"",value:""},{label:Object(n.__)("earlier"),value:"earlier"},{label:Object(n.__)("later"),value:"later"}]}]}]},{name:"details",icon:F.a,title:Object(n.__)("Details"),fields:[{name:"capacity",label:Object(n.__)("Capacity"),fieldType:"number",parseAsInfinity:!0,min:-1,formControlProps:l}]}]})}),[l,e,a])},Y=function(e){var t=Object(u.useBulkEdit)(),a=t.getSelected,l=t.unSelectAll,n=Object(i.useDatetimes)(),c=Object(i.useBulkEditDatetimes)().updateEntities;return Object(s.useCallback)((function(t){e(),l();var s=Object(i.formToBulkUpdateInput)(t,n,a());c(s)}),[n,a,e,l,c])},q=function(e){var t=e.onClose,a=e.isOpen,s=Y(t),i=V({onSubmit:s});return Object(l.jsx)(c.BulkEditDetails,{formConfig:i,isOpen:a,onClose:t,title:Object(n.__)("Bulk edit date details"),warning:Object(n.__)("any changes will be applied to ALL of the selected dates.")})},Q=function(e){var t=e.areTrashedDates,a=e.onClose,l=Object(u.useBulkEdit)(),n=l.getSelected,c=l.unSelectAll,r=Object(i.useBulkDeleteDatetimes)();return Object(s.useCallback)((function(){a(),c(),r(n(),t)}),[t,r,n,a,c])},Z=function(e){var t=e.areTrashedDates,a=e.onClose,c=Q({areTrashedDates:t,onClose:a}),i=Object(v.useConfirmationDialog)({message:t?Object(n.__)("Are you sure you want to permanently delete these datetimes? This action can NOT be undone!"):Object(n.__)("Are you sure you want to trash these datetimes?"),title:t?Object(n.__)("Delete datetimes permanently"):Object(n.__)("Trash datetimes"),onConfirm:c,onCancel:a}),r=i.confirmationDialog,o=i.onOpen;return Object(s.useEffect)((function(){return o()}),[]),Object(l.jsx)(l.Fragment,{children:r})},H=Object(u.withFeature)("use_bulk_edit")((function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],u=Object(T.useDisclosure)(),d=u.isOpen,m=u.onOpen,j=u.onClose,p=Object(i.useDatesListFilterState)().status===w.DatetimeStatus.trashedOnly,O=Object(T.useMemoStringify)([{value:"",label:Object(n.__)("bulk actions")},{value:"edit-details",label:Object(n.__)("edit datetime details")},{value:"delete",label:p?Object(n.__)("delete datetimes"):Object(n.__)("trash datetimes")}]),y=Object(s.useCallback)((function(e){r(e),m()}),[m]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(c.BulkActions,{Checkbox:b,defaultAction:"",id:"ee-bulk-edit-dates-actions",onApply:y,options:O}),d&&Object(l.jsxs)(l.Fragment,{children:["edit-details"===a&&Object(l.jsx)(q,{isOpen:!0,onClose:j}),"delete"===a&&Object(l.jsx)(Z,{areTrashedDates:p,onClose:j})]})]})}));t.default=Object(u.withBulkEdit)((function(){var e=Object(i.useDatesListFilterState)(),t=Object(i.useFilteredDateIds)(),a=Object(i.useReorderDatetimes)(t).sortResponder,s=C(),r=d();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(H,{}),Object(l.jsx)(c.EntityTable,{bodyRowGenerator:s,domain:i.domain,entityIds:t,filterState:e,headerRowGenerator:r,listId:i.datesList,onSort:a,tableCaption:Object(n.__)("Event Dates"),tableId:"date-entities-table-view"})]})}))},395:function(e,t,a){var l=a(53)(a(122));e.exports=l},559:function(e,t,a){var l=a(100),s=a(869),n=a(395),c=a(870);e.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return l(arguments[0].length,n(s,arguments[0],c(arguments)))}},606:function(e,t,a){var l=a(75);e.exports=function(e,t){return function(){var a=arguments.length;if(0===a)return t();var s=arguments[a-1];return l(s)||"function"!==typeof s[e]?t.apply(this,arguments):s[e].apply(s,Array.prototype.slice.call(arguments,0,a-1))}}},869:function(e,t){e.exports=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}}},870:function(e,t,a){var l=a(606),s=a(29)(l("tail",a(871)(1,1/0)));e.exports=s},871:function(e,t,a){var l=a(606),s=a(53)(l("slice",(function(e,t,a){return Array.prototype.slice.call(a,e,t)})));e.exports=s}}]);
//# sourceMappingURL=dates-table-view.e57e9c03.chunk.js.map