{"version":3,"sources":["../domains/eventEditor/src/ui/tickets/TicketRegistrationsLink.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/cardView/TicketQuantity.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/editable/EditableName.tsx","../domains/eventEditor/src/ui/tickets/hooks/useRecalculateBasePrice.ts","../domains/eventEditor/src/ui/tickets/ticketsList/editable/EditablePrice.tsx","../domains/eventEditor/src/ui/tickets/hooks/useTicketsActionMenuItems.ts","../domains/eventEditor/src/ui/tickets/ticketsList/actionsMenu/TicketActionsMenu.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/cardView/TicketDetailsPanel.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/cardView/Details.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/cardView/TicketCardSidebar.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/cardView/TicketCard.tsx","../domains/eventEditor/src/ui/tickets/ticketsList/cardView/CardView.tsx"],"names":["tooltipProps","placement","TicketRegistrationsLink","ticket","regListUrl","useRegistrationsLink","ticket_id","dbId","countTitle","__","tooltip","count","registrationCount","emphasizeZero","title","href","TicketQuantity","entity","updateEntity","useTicketMutator","id","onChange","useCallback","qty","quantity","parseInfinity","value","EditableName","className","view","lineCount","onChangeName","name","ticketName","tag","useRecalculateBasePrice","ticketId","getDataState","useInitialState","defaultBasePrice","useDefaultBasePrice","mutatePrices","useMutatePrices","updateTicket","ticketPrice","tpcData","updatedTicket","price","getBasePrice","prices","newPrices","order","isNew","calculateBasePrice","then","relatedPriceIds","reverseCalculate","EditablePrice","useMoneyDisplay","afterAmount","beforeAmount","formatAmount","recalculateBasePrice","onChangePrice","amount","parseFloat","wrapperProps","useMemoStringify","isEditDisabled","Boolean","sold","SOLD_TICKET_ERROR_MESSAGE","placeholder","useTicketsActionMenuItems","useEntityActionsMenuItems","TicketActionsMenu","props","menuItems","TicketDetailsPanel","adminUrl","eventId","details","useMemo","label","type","Details","siteUrl","useConfig","getAdminUrl","adminSiteUrl","admin","page","ADMIN_ROUTES","REGISTRATIONS","useEventId","onUpdate","description","text","TicketCardSidebar","displayStartOrEndDate","useTicketsListFilterState","siteTimeToUtc","useTimeZoneTime","onEditHandler","start","end","startDate","toISOString","endDate","statusText","getTicketStatusTextLabel","displayDate","header","TicketCard","useTicketItem","bgClassName","ticketStatusBgColorClassName","actionsMenu","layout","EntityActionsMenuLayout","Vertical","reverse","sidebar","sidebarClass","CardView","filteredTicketIds","useFilteredTicketIds","EntityCard","entityIds"],"mappings":"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","file":"static/js/tickets-card-view.1c93bb5d.chunk.js","sourcesContent":["import { __ } from '@eventespresso/i18n';\n\nimport { RegistrationsLink, ItemCount } from '@eventespresso/ui-components';\nimport type { Ticket } from '@eventespresso/edtr-services';\nimport { useRegistrationsLink } from '@eventespresso/edtr-services';\n\ninterface Props {\n\tticket: Ticket;\n}\n\nconst tooltipProps = { placement: 'top' as const };\n\nconst TicketRegistrationsLink: React.FC<Props> = ({ ticket }) => {\n\tconst regListUrl = useRegistrationsLink({ ticket_id: ticket.dbId });\n\n\tconst countTitle = __('total registrations.');\n\tconst tooltip = __('view ALL registrations for this ticket.');\n\n\treturn (\n\t\t<ItemCount count={ticket.registrationCount} emphasizeZero={false} title={countTitle}>\n\t\t\t<RegistrationsLink href={regListUrl} tooltip={tooltip} tooltipProps={tooltipProps} />\n\t\t</ItemCount>\n\t);\n};\n\nexport default TicketRegistrationsLink;\n","import { useCallback } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport { parseInfinity } from '@eventespresso/utils';\nimport { InlineEditInfinity, TextProps } from '@eventespresso/ui-components';\nimport { useTicketMutator } from '@eventespresso/edtr-services';\nimport type { TicketItemProps } from '../types';\n\nconst TicketQuantity: React.FC<TicketItemProps> = ({ entity: ticket }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst onChange: TextProps['onChange'] = useCallback(\n\t\t(qty) => {\n\t\t\tconst quantity = parseInfinity(qty);\n\t\t\tif (quantity !== ticket.quantity) {\n\t\t\t\tupdateEntity({ quantity });\n\t\t\t}\n\t\t},\n\t\t[ticket.quantity, updateEntity]\n\t);\n\n\treturn (\n\t\t<InlineEditInfinity\n\t\t\tonChange={onChange}\n\t\t\tvalue={`${ticket.quantity}`}\n\t\t\ttooltip={__('edit quantity of tickets available…')}\n\t\t/>\n\t);\n};\n\nexport default TicketQuantity;\n","import { useCallback } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport type { TicketItemProps } from '../types';\nimport { useTicketMutator } from '@eventespresso/edtr-services';\nimport { InlineEditText } from '@eventespresso/ui-components';\n\ninterface EditableNameProps extends TicketItemProps {\n\tclassName?: string;\n\tview?: 'card' | 'table';\n}\n\nconst EditableName: React.FC<Partial<EditableNameProps>> = ({ className, entity: ticket, view = 'card' }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst lineCount = view === 'card' && 2;\n\n\tconst onChangeName = useCallback(\n\t\t(name: string): void => {\n\t\t\tif (name !== ticket.name) {\n\t\t\t\tupdateEntity({ name });\n\t\t\t}\n\t\t},\n\t\t[ticket.name, updateEntity]\n\t);\n\n\tconst tooltip = __('edit title…');\n\n\tconst ticketName = ticket.name || tooltip;\n\n\treturn (\n\t\t<InlineEditText\n\t\t\tclassName={className}\n\t\t\tlineCount={lineCount}\n\t\t\tonChange={onChangeName}\n\t\t\ttag={view === 'table' ? 'div' : 'h4'}\n\t\t\ttooltip={tooltip}\n\t\t\tvalue={ticketName}\n\t\t/>\n\t);\n};\n\nexport default EditableName;\n","import { useCallback } from 'react';\n\nimport { EntityId } from '@eventespresso/data';\nimport { calculateBasePrice, useInitialState } from '@eventespresso/tpc';\nimport { getBasePrice } from '@eventespresso/predicates';\nimport { useDefaultBasePrice, useMutatePrices } from '@eventespresso/tpc';\nimport { useTicketMutator } from '@eventespresso/edtr-services';\n\ntype Callback = (ticketPrice: number) => void;\n\nconst useRecalculateBasePrice = (ticketId: EntityId): Callback => {\n\t// This will give us the exact state expected by `calculateBasePrice()`\n\tconst getDataState = useInitialState({ ticketId });\n\t// This default price will be added if there is none\n\tconst defaultBasePrice = useDefaultBasePrice();\n\tconst mutatePrices = useMutatePrices();\n\tconst { updateEntity: updateTicket } = useTicketMutator(ticketId);\n\n\treturn useCallback<Callback>(\n\t\t(ticketPrice) => {\n\t\t\tlet tpcData = getDataState(null);\n\t\t\t// Make sure the new ticket price is used\n\t\t\tconst updatedTicket = { ...tpcData?.ticket, price: ticketPrice };\n\t\t\ttpcData = { ...tpcData, ticket: updatedTicket };\n\n\t\t\tconst exitingBasePrice = getBasePrice(tpcData?.prices);\n\t\t\t// if the ticket does not have a base price,\n\t\t\t// that means it was free and now a price has been added ¯\\_(ツ)_/¯\n\t\t\tif (!exitingBasePrice) {\n\t\t\t\tconst newPrices = [\n\t\t\t\t\t// add the default price\n\t\t\t\t\t{ ...defaultBasePrice, order: 1, isNew: true },\n\t\t\t\t\t// add the existing ones, just in case we are dealing with aliens,\n\t\t\t\t\t// don't get me wrong, because only they can have other prices without a base price,\n\t\t\t\t\t// may be their taxation systen works differently, who knows ¯\\_(ツ)_/¯\n\t\t\t\t\t...tpcData?.prices,\n\t\t\t\t];\n\t\t\t\ttpcData = { ...tpcData, prices: newPrices };\n\t\t\t}\n\t\t\t// get the list of updated prices with the amount of base price updated\n\t\t\tconst newPrices = calculateBasePrice(tpcData);\n\n\t\t\tmutatePrices(newPrices).then((relatedPriceIds) => {\n\t\t\t\tupdateTicket({\n\t\t\t\t\t// this is the ticket prices amount\n\t\t\t\t\tprice: ticketPrice,\n\t\t\t\t\t// since ticket price has been changed, we need to go in reverse gear ◀️\n\t\t\t\t\treverseCalculate: true,\n\t\t\t\t\t// Make sure related prices are updated\n\t\t\t\t\tprices: relatedPriceIds,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[defaultBasePrice, getDataState, mutatePrices, updateTicket]\n\t);\n};\n\nexport default useRecalculateBasePrice;\n","import { useCallback } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport { InlineEditCurrency } from '@eventespresso/ui-components';\nimport { useMemoStringify } from '@eventespresso/hooks';\nimport { useMoneyDisplay } from '@eventespresso/services';\nimport { SOLD_TICKET_ERROR_MESSAGE } from '@eventespresso/tpc';\nimport useRecalculateBasePrice from '../../hooks/useRecalculateBasePrice';\nimport type { TicketItemProps } from '../types';\n\ninterface EditablePriceProps extends TicketItemProps {\n\tclassName?: string;\n}\n\nconst EditablePrice: React.FC<Partial<EditablePriceProps>> = ({ entity: ticket, className }) => {\n\tconst { afterAmount, beforeAmount, formatAmount } = useMoneyDisplay();\n\tconst recalculateBasePrice = useRecalculateBasePrice(ticket.id);\n\tconst onChangePrice = useCallback(\n\t\t({ amount }: any): void => {\n\t\t\tconst price = parseFloat(amount);\n\t\t\tif (price !== ticket.price) {\n\t\t\t\trecalculateBasePrice(price);\n\t\t\t}\n\t\t},\n\t\t[recalculateBasePrice, ticket.price]\n\t);\n\n\tconst wrapperProps = useMemoStringify({ className });\n\n\tconst isEditDisabled = Boolean(ticket.sold);\n\n\tconst tooltip = isEditDisabled ? SOLD_TICKET_ERROR_MESSAGE : __('edit ticket total…');\n\n\treturn (\n\t\t<InlineEditCurrency\n\t\t\tafterAmount={afterAmount}\n\t\t\tamount={ticket.price}\n\t\t\tbeforeAmount={beforeAmount}\n\t\t\tformatAmount={formatAmount}\n\t\t\tid={ticket.id}\n\t\t\tisEditDisabled={isEditDisabled}\n\t\t\tplaceholder={__('set price…')}\n\t\t\twrapperProps={wrapperProps}\n\t\t\tonChange={onChangePrice}\n\t\t\ttag={'h3'}\n\t\t\ttooltip={tooltip}\n\t\t/>\n\t);\n};\n\nexport default EditablePrice;\n","import { Ticket } from '@eventespresso/edtr-services';\nimport { useEntityActionsMenuItems } from '@edtrHooks/index';\n\nconst useTicketsActionMenuItems = (ticket: Ticket): Array<React.ReactNode> => {\n\treturn useEntityActionsMenuItems('ticket', ticket);\n};\n\nexport default useTicketsActionMenuItems;\n","import { EntityActionsMenu } from '@eventespresso/ui-components';\nimport type { ActionsMenuComponentProps } from '@eventespresso/registry';\nimport type { Ticket } from '@eventespresso/edtr-services';\n\nimport useTicketsActionMenuItems from '../../hooks/useTicketsActionMenuItems';\n\nconst TicketActionsMenu: React.FC<ActionsMenuComponentProps<Ticket>> = ({ entity, ...props }) => {\n\tconst menuItems = useTicketsActionMenuItems(entity);\n\n\treturn <EntityActionsMenu {...props} menuItems={menuItems} />;\n};\n\nexport default TicketActionsMenu;\n","import { useMemo } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport TicketRegistrationsLink from '../../TicketRegistrationsLink';\nimport { EntityDetailsPanel, EntityDetailsPanelSold } from '@eventespresso/ui-components';\nimport TicketQuantity from './TicketQuantity';\nimport type { TicketItemProps } from '../types';\n\nconst TicketDetailsPanel: React.FC<TicketItemProps> = ({ adminUrl, entity: ticket, eventId }) => {\n\tconst details = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tid: 'ee-ticket-sold',\n\t\t\t\tlabel: __('sold'),\n\t\t\t\tvalue: (\n\t\t\t\t\t<EntityDetailsPanelSold\n\t\t\t\t\t\tadminUrl={adminUrl}\n\t\t\t\t\t\tdbId={ticket.dbId}\n\t\t\t\t\t\teventId={eventId}\n\t\t\t\t\t\tsold={ticket.sold}\n\t\t\t\t\t\ttype='ticket'\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ee-ticket-qty',\n\t\t\t\tlabel: __('quantity'),\n\t\t\t\tvalue: <TicketQuantity entity={ticket} />,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ee-ticket-registrations',\n\t\t\t\tlabel: __('reg list'),\n\t\t\t\tvalue: <TicketRegistrationsLink ticket={ticket} />,\n\t\t\t},\n\t\t],\n\t\t[adminUrl, eventId, ticket]\n\t);\n\n\treturn <EntityDetailsPanel details={details} className='ee-editor-ticket-details-sold-rsrvd-qty-div' />;\n};\n\nexport default TicketDetailsPanel;\n","import { useCallback, useMemo } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport { ADMIN_ROUTES } from '@eventespresso/constants';\nimport { SimpleTextEditorModal } from '@eventespresso/ee-components';\nimport { useConfig } from '@eventespresso/services';\nimport { getAdminUrl, useTicketMutator, useEventId } from '@eventespresso/edtr-services';\n\nimport { EditableName, EditablePrice } from '../editable';\nimport TicketDetailsPanel from './TicketDetailsPanel';\n\nimport type { TicketItemProps } from '../types';\n\nconst Details: React.FC<Partial<TicketItemProps>> = ({ entity: ticket }) => {\n\tconst { siteUrl } = useConfig();\n\n\tconst adminUrl = useMemo(() => {\n\t\treturn getAdminUrl({ adminSiteUrl: siteUrl.admin, page: ADMIN_ROUTES.REGISTRATIONS });\n\t}, [siteUrl.admin]);\n\n\tconst eventId = useEventId();\n\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst onUpdate = useCallback(\n\t\t(description: string): void => {\n\t\t\tupdateEntity({ description });\n\t\t},\n\t\t[updateEntity]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<EditableName className={'entity-card-details__name'} entity={ticket} />\n\n\t\t\t<SimpleTextEditorModal\n\t\t\t\tclassName='entity-card-details__text'\n\t\t\t\tonUpdate={onUpdate}\n\t\t\t\ttext={ticket.description}\n\t\t\t\ttitle={__('Edit description')}\n\t\t\t\ttooltip={__('edit description…')}\n\t\t\t/>\n\n\t\t\t<EditablePrice className='entity-card-details__price' entity={ticket} />\n\n\t\t\t<TicketDetailsPanel adminUrl={adminUrl} entity={ticket} eventId={eventId} />\n\t\t</>\n\t);\n};\n\nexport default Details;\n","import { useCallback } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport { CalendarDateSwitcher, EditDateRangeButton } from '@eventespresso/ee-components';\nimport { getTicketStatusTextLabel } from '@eventespresso/helpers';\nimport { useTicketMutator, useTicketsListFilterState } from '@eventespresso/edtr-services';\nimport { useTimeZoneTime } from '@eventespresso/services';\nimport type { DateRange } from '@eventespresso/dates';\nimport type { TicketItemProps } from '../types';\n\nconst TicketCardSidebar: React.FC<Partial<TicketItemProps>> = ({ entity: ticket }) => {\n\tconst { displayStartOrEndDate } = useTicketsListFilterState();\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\tconst { siteTimeToUtc } = useTimeZoneTime();\n\n\tconst onEditHandler = useCallback(\n\t\t([start, end]: DateRange): void => {\n\t\t\t// convert start & end dates to proper UTC \"startDate\" and \"endDate\"\n\t\t\tconst startDate = siteTimeToUtc(start).toISOString();\n\t\t\tconst endDate = siteTimeToUtc(end).toISOString();\n\t\t\tupdateEntity({ startDate, endDate });\n\t\t},\n\t\t[siteTimeToUtc, updateEntity]\n\t);\n\tconst statusText = getTicketStatusTextLabel(ticket);\n\n\treturn ticket ? (\n\t\t<>\n\t\t\t<CalendarDateSwitcher\n\t\t\t\tdisplayDate={displayStartOrEndDate}\n\t\t\t\tendDate={ticket.endDate}\n\t\t\t\tstartDate={ticket.startDate}\n\t\t\t/>\n\t\t\t<EditDateRangeButton\n\t\t\t\tendDate={ticket.endDate}\n\t\t\t\theader={__('Edit Ticket Sale Dates')}\n\t\t\t\tonEditHandler={onEditHandler}\n\t\t\t\ttooltip={__('edit ticket sales start and end dates')}\n\t\t\t\tstartDate={ticket.startDate}\n\t\t\t/>\n\t\t\t<div className={'ee-ticket-status-label'}>{statusText}</div>\n\t\t</>\n\t) : null;\n};\n\nexport default TicketCardSidebar;\n","import { EntityActionsMenuLayout } from '@eventespresso/ui-components';\nimport { EntityCard } from '@eventespresso/ui-components';\nimport { ticketStatusBgColorClassName } from '@eventespresso/helpers';\nimport { useTicketItem } from '@eventespresso/edtr-services';\n\nimport Details from './Details';\nimport TicketCardSidebar from './TicketCardSidebar';\nimport TicketActionsMenu from '../actionsMenu/TicketActionsMenu';\nimport type { TicketItemProps } from '../types';\n\nconst TicketCard: React.FC<TicketItemProps> = ({ id }) => {\n\tconst ticket = useTicketItem({ id });\n\tconst bgClassName = ticketStatusBgColorClassName(ticket);\n\n\treturn ticket ? (\n\t\t<EntityCard\n\t\t\tactionsMenu={<TicketActionsMenu entity={ticket} layout={EntityActionsMenuLayout.Vertical} />}\n\t\t\tdetails={<Details entity={ticket} />}\n\t\t\tentity={ticket}\n\t\t\treverse\n\t\t\tsidebar={<TicketCardSidebar entity={ticket} />}\n\t\t\tsidebarClass={bgClassName}\n\t\t/>\n\t) : null;\n};\n\nexport default TicketCard;\n","import { EntityCardList } from '@eventespresso/ui-components';\nimport { useFilteredTicketIds } from '@eventespresso/edtr-services';\n\nimport TicketCard from './TicketCard';\n\nconst CardView: React.FC = () => {\n\tconst filteredTicketIds = useFilteredTicketIds();\n\n\treturn <EntityCardList EntityCard={TicketCard} entityIds={filteredTicketIds} />;\n};\n\nexport default CardView;\n"],"sourceRoot":""}